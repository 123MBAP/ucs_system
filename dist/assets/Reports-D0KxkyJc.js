import{u as Re,j as e}from"./index-DnGg16Vn.js";import{f as Le,r as l,N as Te}from"./react-BeLGUnOF.js";import{L as Ae}from"./LoadingSpinner-uLM5j9Cp.js";const h="http://localhost:4000",Ze=()=>{const{t:s,lang:A}=Re(),re=Le(),[c,ne]=l.useState(null),[ae,m]=l.useState(!1),[I,x]=l.useState(null),oe=new Date,[p,le]=l.useState(oe.getFullYear()),[o,ie]=l.useState(0),[k,ce]=l.useState([]),[E,de]=l.useState([]),[D,pe]=l.useState(null),[U,me]=l.useState([]),[y,Z]=l.useState(""),[j,xe]=l.useState("all"),[B,M]=l.useState([]),[H,O]=l.useState([]),[$,Y]=l.useState(null),[q,he]=l.useState([]),[b,ue]=l.useState(null),[V,ge]=l.useState([]),[F,fe]=l.useState(null),[w,ye]=l.useState(""),[S,je]=l.useState(""),[u,ve]=l.useState("all"),[G,Ne]=l.useState([]),[_,J]=l.useState(""),[v,be]=l.useState("all"),K=l.useRef(null),Q=l.useRef(null),W=l.useRef(null),X=l.useRef(null),d=l.useMemo(()=>new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),[A]);function z(t,a){const n=window.open("","_blank");n&&(n.document.open(),n.document.write(`<!doctype html><html><head><meta charset="utf-8"><title>${t}</title>
      <style>
        body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, 'Apple Color Emoji','Segoe UI Emoji'; padding: 24px; }
        table { width: 100%; border-collapse: collapse; font-size: 12px; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background: #f3f4f6; text-align: left; }
        h1 { font-size: 18px; margin: 0 0 12px; }
      </style>
    </head><body>
      <h1>${t}</h1>
      ${a}
      <script>window.onload = function(){ window.print(); setTimeout(()=>window.close(), 300); }<\/script>
    </body></html>`),n.document.close())}const we=()=>{var N;const t=((N=K.current)==null?void 0:N.innerHTML)||"",a=o===0?s("reports.filters.all"):new Date(2e3,o-1,1).toLocaleString(void 0,{month:"long"}),n=G.find(f=>String(f.id)===_),r=U.find(f=>String(f.id)===y),i=B.map(f=>f.zone_name).filter(Boolean),g=r?[r.zone_name]:i.length?i:[],T=`
      <div style="margin-bottom:16px">
        <div style="font-size:20px;font-weight:700;">${s("reports.company")}</div>
        <div style="font-size:14px;color:#374151;">${s("reports.export.zonesTitle")}</div>
        <div style="margin-top:8px;font-size:12px;color:#111827;">
          <div><strong>${s("reports.period")}:</strong> ${a} ${p}</div>
          <div><strong>${s("reports.filter")}:</strong> ${j}</div>
          <div><strong>${s("reports.supervisor")}:</strong> ${n?n.username:s("reports.filters.all")}</div>
          <div><strong>${s("reports.zones")}:</strong> ${g.length?g.join(", "):s("reports.filters.all")}</div>
        </div>
      </div>`,P=o===0?"all":String(o);z(`${s("reports.export.zonesTitle")} ${p}-${P}`,T+t)},Se=()=>{var i;const t=((i=Q.current)==null?void 0:i.innerHTML)||"",a=o===0?s("reports.filters.all"):new Date(2e3,o-1,1).toLocaleString(void 0,{month:"long"}),n=`
      <div style="margin-bottom:16px">
        <div style="font-size:20px;font-weight:700;">${s("reports.company")}</div>
        <div style="font-size:14px;color:#374151;">${s("reports.export.chiefClientsTitle")}</div>
        <div style="margin-top:8px;font-size:12px;color:#111827;">
          <div><strong>${s("reports.period")}:</strong> ${a} ${p}</div>
          <div><strong>${s("reports.filter")}:</strong> ${v}</div>
        </div>
      </div>`,r=o===0?"all":String(o);z(`${s("reports.export.chiefClientsTitle")} ${p}-${r} (${v})`,n+t)},_e=()=>{var i;const t=((i=W.current)==null?void 0:i.innerHTML)||"",a=o===0?s("reports.filters.all"):new Date(2e3,o-1,1).toLocaleString(void 0,{month:"long"}),n=`
      <div style="margin-bottom:16px">
        <div style="font-size:20px;font-weight:700;">${s("reports.company")}</div>
        <div style="font-size:14px;color:#374151;">${s("reports.export.chiefPaymentsTitle")}</div>
        <div style="margin-top:8px;font-size:12px;color:#111827;">
          <div><strong>${s("reports.period")}:</strong> ${a} ${p}</div>
        </div>
      </div>`,r=o===0?"all":String(o);z(`${s("reports.export.chiefPaymentsTitle")} ${p}-${r}`,n+t)},$e=()=>{var i;const t=((i=X.current)==null?void 0:i.innerHTML)||"",a=o===0?s("reports.filters.all"):new Date(2e3,o-1,1).toLocaleString(void 0,{month:"long"}),n=`
      <div style="margin-bottom:16px">
        <div style="font-size:20px;font-weight:700;">${s("reports.company")}</div>
        <div style="font-size:14px;color:#374151;">${s("reports.export.clientPaymentsTitle")}</div>
        <div style="margin-top:8px;font-size:12px;color:#111827;">
          <div><strong>${s("reports.period")}:</strong> ${a} ${p}</div>
        </div>
      </div>`,r=o===0?"all":String(o);z(`${s("reports.export.clientPaymentsTitle")} ${p}-${r}`,n+t)};function ee(t){if(t==null)return"";const a=String(t);return/[",\n]/.test(a)?'"'+a.replace(/"/g,'""')+'"':a}function C(t,a,n){const r=a.map(ee).join(","),i=n.map(f=>f.map(ee).join(",")),g=[r,...i].join(`
`),T=new Blob([g],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(T),N=document.createElement("a");N.href=P,N.download=t,N.click(),URL.revokeObjectURL(P)}const ze=()=>{const t=new Date().toISOString().replace(/[:T]/g,"-").slice(0,16),a=B.map(r=>[r.zone_id,r.zone_name,r.clients_count,r.amount_to_pay,r.amount_paid,r.amount_remaining]),n=o===0?"all":String(o);C(`zones_summary_${p}-${n}_${j||"all"}_${t}.csv`,["Zone ID",s("reports.columns.zone"),s("reports.columns.clients"),s("reports.columns.toPay"),s("reports.columns.paid"),s("reports.columns.remaining")],a)},Ce=()=>{const t=new Date().toISOString().replace(/[:T]/g,"-").slice(0,16),a=k.map(r=>[r.client_id,r.client_username??"",r.amount_to_pay,r.amount_paid,r.amount_remaining]),n=o===0?"all":String(o);C(`chief_clients_${p}-${n}_${v}_${t}.csv`,["Client ID",s("reports.client"),s("reports.columns.toPay"),s("reports.columns.paid"),s("reports.columns.remaining")],a)},Pe=()=>{const t=new Date().toISOString().replace(/[:T]/g,"-").slice(0,16),a=R.map(r=>[r.id,r.completed_at??"",r.client_username??r.client_id??"",r.amount,r.currency??"",r.status??""]),n=o===0?"all":String(o);C(`chief_payments_${p}-${n}_${u}_${t}.csv`,["Payment ID",s("reports.date"),s("reports.client"),s("reports.amount"),s("reports.currency"),s("reports.status")],a)},ke=()=>{const t=new Date().toISOString().replace(/[:T]/g,"-").slice(0,16),a=L.map(r=>[r.id,r.completed_at??"",r.amount,r.currency??"",r.status??""]),n=o===0?"all":String(o);C(`my_payments_${p}-${n}_${u}_${t}.csv`,["Payment ID",s("reports.date"),s("reports.amount"),s("reports.currency"),s("reports.status")],a)},De=t=>{Z(t),c==="manager"&&t&&J("")},Fe=t=>{J(t),c==="manager"&&t&&Z("")};l.useEffect(()=>{const t=localStorage.getItem("token");if(!t){re("/login",{replace:!0});return}m(!0),x(null),fetch(`${h}/api/me`,{headers:{Authorization:`Bearer ${t}`}}).then(async a=>{var r;const n=await a.json();if(!a.ok)throw new Error((n==null?void 0:n.error)||"Failed to load user");ne(((r=n==null?void 0:n.user)==null?void 0:r.role)??null)}).catch(a=>x((a==null?void 0:a.message)||"Failed to load user")).finally(()=>m(!1))},[]),l.useEffect(()=>{const t=localStorage.getItem("token");if(!t||!c||c!=="manager"&&c!=="supervisor")return;m(!0),x(null),fetch(`${h}/api/zones${c==="supervisor"?"?scope=supervisor":""}`,{headers:{Authorization:`Bearer ${t}`}}).then(async n=>{const r=await n.json();if(!n.ok)throw new Error((r==null?void 0:r.error)||"Failed to load zones");const i=(r.zones||[]).map(g=>({id:g.id,zone_name:g.zone_name}));me(i)}).catch(n=>x((n==null?void 0:n.message)||"Failed to load zones")).finally(()=>m(!1))},[c]),l.useEffect(()=>{const t=localStorage.getItem("token");!t||c!=="manager"||(m(!0),x(null),fetch(`${h}/api/report/supervisors`,{headers:{Authorization:`Bearer ${t}`}}).then(async a=>{const n=await a.json();if(!a.ok)throw new Error((n==null?void 0:n.error)||"Failed to load supervisors");Ne(Array.isArray(n.supervisors)?n.supervisors:[])}).catch(a=>x((a==null?void 0:a.message)||"Failed to load supervisors")).finally(()=>m(!1)))},[c]),l.useEffect(()=>{const t=localStorage.getItem("token");if(!(!t||!c))if(m(!0),x(null),c==="chief"){const a=new URLSearchParams;a.set("year",String(p)),o>0&&a.set("month",String(o)),a.set("filter",v),fetch(`${h}/api/report/clients-summary?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}}).then(async r=>{const i=await r.json();if(!r.ok)throw new Error((i==null?void 0:i.error)||"Failed to load summary");ce(Array.isArray(i.clients)?i.clients:[])}).catch(r=>x((r==null?void 0:r.message)||"Failed to load summary")).finally(()=>m(!1));const n=new URLSearchParams;n.set("year",String(p)),o>0&&n.set("month",String(o)),fetch(`${h}/api/report/payments?${n.toString()}`,{headers:{Authorization:`Bearer ${t}`}}).then(async r=>{const i=await r.json();if(!r.ok)throw new Error((i==null?void 0:i.error)||"Failed to load payments");de(Array.isArray(i.payments)?i.payments:[]),pe(i.totals||null)}).catch(r=>x((r==null?void 0:r.message)||"Failed to load payments"))}else if(c==="manager"||c==="supervisor")if(y){const a=new URLSearchParams;a.set("zoneId",y),a.set("year",String(p)),o>0&&a.set("month",String(o)),a.set("filter",j),fetch(`${h}/api/report/zone-clients?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}}).then(async n=>{const r=await n.json();if(!n.ok)throw new Error((r==null?void 0:r.error)||"Failed to load zone clients");O(Array.isArray(r.clients)?r.clients:[]),Y(r.totals||null),M([])}).catch(n=>x((n==null?void 0:n.message)||"Failed to load zone clients")).finally(()=>m(!1))}else{const a=new URLSearchParams;a.set("year",String(p)),o>0&&a.set("month",String(o)),a.set("filter",j),c==="manager"&&_&&a.set("supervisorId",_),fetch(`${h}/api/report/zones-clients?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}}).then(async n=>{const r=await n.json();if(!n.ok)throw new Error((r==null?void 0:r.error)||"Failed to load zones clients");he(Array.isArray(r.zones)?r.zones:[]),ue(r.totals||null),M([]),O([]),Y(null)}).catch(n=>x((n==null?void 0:n.message)||"Failed to load zones clients")).finally(()=>m(!1))}else if(c==="client"){const a=new URLSearchParams;a.set("year",String(p)),o>0&&a.set("month",String(o)),fetch(`${h}/api/report/payments?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}}).then(async n=>{const r=await n.json();if(!n.ok)throw new Error((r==null?void 0:r.error)||"Failed to load payments");ge(Array.isArray(r.payments)?r.payments:[]),fe(r.totals||null)}).catch(n=>x((n==null?void 0:n.message)||"Failed to load payments")).finally(()=>m(!1))}else m(!1)},[c,p,o,j,y,_,v]);const te=t=>{if(!t)return!1;const a=new Date(t);if(w){const n=new Date(w);if(a<n)return!1}if(S){const n=new Date(S);if(n.setHours(23,59,59,999),a>n)return!1}return!0},se=t=>u==="all"?!0:(t||"").toLowerCase()===u,R=l.useMemo(()=>E.filter(t=>te(t.completed_at)&&se(t.status)),[E,w,S,u]),L=l.useMemo(()=>V.filter(t=>te(t.completed_at)&&se(t.status)),[V,w,S,u]);return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:s("reports.title")}),e.jsxs("div",{className:"mb-4 flex flex-wrap items-end gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.year")}),e.jsx("select",{className:"mt-1 border rounded px-2 py-2",value:p,onChange:t=>le(Number(t.target.value)),children:Array.from({length:6}).map((t,a)=>{const n=new Date().getFullYear()-a;return e.jsx("option",{value:n,children:n},n)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.month")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:o,onChange:t=>ie(Number(t.target.value)),children:[e.jsx("option",{value:0,children:s("reports.filters.all")}),Array.from({length:12}).map((t,a)=>{const n=a+1,i=new Date(2e3,a,1).toLocaleString(void 0,{month:"long"});return e.jsx("option",{value:n,children:i},n)})]})]}),(c==="manager"||c==="supervisor")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.zone")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:y,onChange:t=>De(t.target.value),children:[e.jsx("option",{value:"",children:s("reports.allZones")}),U.map(t=>e.jsx("option",{value:t.id,children:t.zone_name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.paidRemaining")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:j,onChange:t=>xe(t.target.value),children:[e.jsx("option",{value:"all",children:s("reports.filters.all")}),e.jsx("option",{value:"paid",children:s("reports.filters.paid")}),e.jsx("option",{value:"remaining",children:s("reports.filters.remaining")})]})]}),c==="manager"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.supervisor")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:_,onChange:t=>Fe(t.target.value),children:[e.jsx("option",{value:"",children:s("reports.allSupervisors")}),G.map(t=>e.jsx("option",{value:t.id,children:t.username},t.id))]})]}),e.jsxs("div",{className:"self-end pb-1 flex items-center gap-2",children:[e.jsx("button",{onClick:ze,className:"px-3 py-2 rounded bg-amber-600 text-white",children:s("reports.downloadCsv")}),e.jsx("button",{onClick:we,className:"px-3 py-2 rounded bg-amber-700 text-white",children:s("reports.downloadPdf")})]})]}),c==="chief"&&e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("div",{className:"text-sm text-gray-600",children:s("reports.chief.showingClients")}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.paidRemaining")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:v,onChange:t=>be(t.target.value),children:[e.jsx("option",{value:"all",children:s("reports.filters.all")}),e.jsx("option",{value:"paid",children:s("reports.filters.paid")}),e.jsx("option",{value:"remaining",children:s("reports.filters.remaining")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.startDate")}),e.jsx("input",{type:"date",className:"mt-1 border rounded px-2 py-2",value:w,onChange:t=>ye(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.endDate")}),e.jsx("input",{type:"date",className:"mt-1 border rounded px-2 py-2",value:S,onChange:t=>je(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.status")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:u,onChange:t=>ve(t.target.value),children:[e.jsx("option",{value:"all",children:s("reports.status.all")}),e.jsx("option",{value:"success",children:s("reports.status.success")}),e.jsx("option",{value:"failed",children:s("reports.status.failed")}),e.jsx("option",{value:"pending",children:s("reports.status.pending")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Ce,className:"px-3 py-2 rounded bg-amber-600 text-white",children:s("reports.downloadCsv")}),e.jsx("button",{onClick:Se,className:"px-3 py-2 rounded bg-amber-700 text-white",children:s("reports.downloadPdf")})]})]}),c==="client"&&e.jsx("div",{className:"text-sm text-gray-600",children:s("reports.client.showingSummary")})]}),I&&e.jsx("div",{className:"text-red-600 mb-3",children:I}),ae?e.jsx("div",{className:"py-8 flex items-center justify-center",children:e.jsx(Ae,{})}):e.jsxs(e.Fragment,{children:[(c==="manager"||c==="supervisor")&&e.jsx("div",{ref:K,className:"bg-white rounded-lg shadow overflow-auto",children:y?e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.client")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.toPay")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.paid")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.remaining")})]})}),e.jsxs("tbody",{children:[H.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:t.client_username||t.client_id}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(t.amount_to_pay)}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(t.amount_paid)}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(t.amount_remaining)})]},t.client_id)),!H.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-gray-500",colSpan:4,children:s("reports.noData")})})]}),$&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t",children:[e.jsx("td",{className:"px-4 py-3 text-right",children:s("reports.totals")}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format($.amount_to_pay)}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format($.amount_paid)}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format($.amount_remaining)})]})})]}):e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.columns.zone")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.client")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.toPay")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.paid")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.remaining")})]})}),e.jsxs("tbody",{children:[q.flatMap(t=>[e.jsx("tr",{className:"border-t bg-gray-50 font-medium",children:e.jsx("td",{className:"px-4 py-2",colSpan:5,children:e.jsx(Te,{className:"text-amber-700 hover:underline",to:`/zones/${t.zone_id}`,children:t.zone_name})})},`z-${t.zone_id}`),...t.clients.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2"}),e.jsx("td",{className:"px-4 py-2",children:a.client_username||a.client_id}),e.jsx("td",{className:"px-4 py-2 text-right",children:d.format(a.amount_to_pay)}),e.jsx("td",{className:"px-4 py-2 text-right",children:d.format(a.amount_paid)}),e.jsx("td",{className:"px-4 py-2 text-right",children:d.format(a.amount_remaining)})]},`c-${t.zone_id}-${a.client_id}`)),e.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[e.jsx("td",{className:"px-4 py-2 text-right",children:s("reports.totals")}),e.jsx("td",{className:"px-4 py-2 text-right",children:d.format(t.totals.count)}),e.jsx("td",{className:"px-4 py-2 text-right",children:d.format(t.totals.amount_to_pay)}),e.jsx("td",{className:"px-4 py-2 text-right",children:d.format(t.totals.amount_paid)}),e.jsx("td",{className:"px-4 py-2 text-right",children:d.format(t.totals.amount_remaining)})]},`zt-${t.zone_id}`)]),!q.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-gray-500",colSpan:5,children:s("reports.noData")})})]}),b&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold border-t",children:[e.jsx("td",{className:"px-4 py-3 text-right",children:s("reports.totals")}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(b.count)}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(b.amount_to_pay)}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(b.amount_paid)}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(b.amount_remaining)})]})})]})}),c==="chief"&&e.jsx("div",{ref:Q,className:"bg-white rounded-lg shadow overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.client")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.toPay")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.paid")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.remaining")})]})}),e.jsxs("tbody",{children:[k.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:t.client_username||t.client_id}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(t.amount_to_pay)}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(t.amount_paid)}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(t.amount_remaining)})]},t.client_id)),!k.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-gray-500",colSpan:4,children:s("reports.noData")})})]})]})}),c==="chief"&&e.jsxs("div",{ref:W,className:"bg-white rounded-lg shadow overflow-auto mt-6",children:[e.jsxs("div",{className:"px-4 py-3 font-semibold flex items-center justify-between",children:[e.jsx("span",{children:s("reports.payments.heading")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Pe,className:"px-3 py-1 rounded bg-amber-600 text-white",children:s("reports.downloadCsv")}),e.jsx("button",{onClick:_e,className:"px-3 py-1 rounded bg-amber-700 text-white",children:s("reports.downloadPdf")})]})]}),e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.date")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.client")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.amount")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.currency")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.status")})]})}),e.jsxs("tbody",{children:[R.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:t.completed_at?new Date(t.completed_at).toLocaleString():"-"}),e.jsx("td",{className:"px-4 py-3",children:t.client_username||t.client_id}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(t.amount)}),e.jsx("td",{className:"px-4 py-3",children:t.currency||""}),e.jsx("td",{className:"px-4 py-3",children:t.status||""})]},t.id)),!R.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-gray-500",colSpan:5,children:s("reports.noData")})})]}),D&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t",children:[e.jsx("td",{className:"px-4 py-3 text-right",colSpan:2,children:s("reports.totals")}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(D.amount_sum)}),e.jsxs("td",{className:"px-4 py-3",colSpan:2,children:[s("reports.count"),": ",d.format(D.count)]})]})})]})]}),c==="client"&&e.jsxs("div",{ref:X,className:"bg-white rounded-lg shadow overflow-auto",children:[e.jsxs("div",{className:"px-4 py-3 font-semibold flex items-center justify-between",children:[e.jsx("span",{children:s("reports.myPayments.heading")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:ke,className:"px-3 py-1 rounded bg-amber-600 text-white",children:s("reports.downloadCsv")}),e.jsx("button",{onClick:$e,className:"px-3 py-1 rounded bg-amber-700 text-white",children:s("reports.downloadPdf")})]})]}),e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.date")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.amount")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.currency")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.status")})]})}),e.jsxs("tbody",{children:[L.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:t.completed_at?new Date(t.completed_at).toLocaleString():"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(t.amount)}),e.jsx("td",{className:"px-4 py-3",children:t.currency||""}),e.jsx("td",{className:"px-4 py-3",children:t.status||""})]},t.id)),!L.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-gray-500",colSpan:4,children:s("reports.noData")})})]}),F&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t",children:[e.jsx("td",{className:"px-4 py-3 text-right",children:s("reports.totals")}),e.jsx("td",{className:"px-4 py-3 text-right",children:d.format(F.amount_sum)}),e.jsxs("td",{className:"px-4 py-3",colSpan:2,children:[s("reports.count"),": ",d.format(F.count)]})]})})]})]})]})]})};export{Ze as default};
