import{u as ze,j as e}from"./index-BdDvBGrt.js";import{f as Ce,r as l,N as Pe}from"./react-BeLGUnOF.js";import{L as ke}from"./LoadingSpinner-BmhjDzC_.js";const f="http://localhost:4000",Le=()=>{const{t:s,lang:T}=ze(),Q=Ce(),[c,W]=l.useState(null),[X,m]=l.useState(!1),[A,h]=l.useState(null),ee=new Date,[d,te]=l.useState(ee.getFullYear()),[o,se]=l.useState(0),[k,re]=l.useState([]),[E,ne]=l.useState([]),[D,ae]=l.useState(null),[U,oe]=l.useState([]),[v,B]=l.useState(""),[N,le]=l.useState("all"),[_,ie]=l.useState([]),[b,ce]=l.useState(null),[M,de]=l.useState([]),[F,pe]=l.useState(null),[w,me]=l.useState(""),[S,he]=l.useState(""),[x,xe]=l.useState("all"),[Z,ue]=l.useState([]),[$,H]=l.useState(""),[y,ge]=l.useState("all"),O=l.useRef(null),Y=l.useRef(null),q=l.useRef(null),V=l.useRef(null),p=l.useMemo(()=>new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),[T]);function z(t,a){const n=window.open("","_blank");n&&(n.document.open(),n.document.write(`<!doctype html><html><head><meta charset="utf-8"><title>${t}</title>
      <style>
        body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, 'Apple Color Emoji','Segoe UI Emoji'; padding: 24px; }
        table { width: 100%; border-collapse: collapse; font-size: 12px; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background: #f3f4f6; text-align: left; }
        h1 { font-size: 18px; margin: 0 0 12px; }
      </style>
    </head><body>
      <h1>${t}</h1>
      ${a}
      <script>window.onload = function(){ window.print(); setTimeout(()=>window.close(), 300); }<\/script>
    </body></html>`),n.document.close())}const fe=()=>{var j;const t=((j=O.current)==null?void 0:j.innerHTML)||"",a=o===0?s("reports.filters.all"):new Date(2e3,o-1,1).toLocaleString(void 0,{month:"long"}),n=Z.find(g=>String(g.id)===$),r=U.find(g=>String(g.id)===v),i=_.map(g=>g.zone_name).filter(Boolean),u=r?[r.zone_name]:i.length?i:[],I=`
      <div style="margin-bottom:16px">
        <div style="font-size:20px;font-weight:700;">${s("reports.company")}</div>
        <div style="font-size:14px;color:#374151;">${s("reports.export.zonesTitle")}</div>
        <div style="margin-top:8px;font-size:12px;color:#111827;">
          <div><strong>${s("reports.period")}:</strong> ${a} ${d}</div>
          <div><strong>${s("reports.filter")}:</strong> ${N}</div>
          <div><strong>${s("reports.supervisor")}:</strong> ${n?n.username:s("reports.filters.all")}</div>
          <div><strong>${s("reports.zones")}:</strong> ${u.length?u.join(", "):s("reports.filters.all")}</div>
        </div>
      </div>`,P=o===0?"all":String(o);z(`${s("reports.export.zonesTitle")} ${d}-${P}`,I+t)},ye=()=>{var i;const t=((i=Y.current)==null?void 0:i.innerHTML)||"",a=o===0?s("reports.filters.all"):new Date(2e3,o-1,1).toLocaleString(void 0,{month:"long"}),n=`
      <div style="margin-bottom:16px">
        <div style="font-size:20px;font-weight:700;">${s("reports.company")}</div>
        <div style="font-size:14px;color:#374151;">${s("reports.export.chiefClientsTitle")}</div>
        <div style="margin-top:8px;font-size:12px;color:#111827;">
          <div><strong>${s("reports.period")}:</strong> ${a} ${d}</div>
          <div><strong>${s("reports.filter")}:</strong> ${y}</div>
        </div>
      </div>`,r=o===0?"all":String(o);z(`${s("reports.export.chiefClientsTitle")} ${d}-${r} (${y})`,n+t)},je=()=>{var i;const t=((i=q.current)==null?void 0:i.innerHTML)||"",a=o===0?s("reports.filters.all"):new Date(2e3,o-1,1).toLocaleString(void 0,{month:"long"}),n=`
      <div style="margin-bottom:16px">
        <div style="font-size:20px;font-weight:700;">${s("reports.company")}</div>
        <div style="font-size:14px;color:#374151;">${s("reports.export.chiefPaymentsTitle")}</div>
        <div style="margin-top:8px;font-size:12px;color:#111827;">
          <div><strong>${s("reports.period")}:</strong> ${a} ${d}</div>
        </div>
      </div>`,r=o===0?"all":String(o);z(`${s("reports.export.chiefPaymentsTitle")} ${d}-${r}`,n+t)},ve=()=>{var i;const t=((i=V.current)==null?void 0:i.innerHTML)||"",a=o===0?s("reports.filters.all"):new Date(2e3,o-1,1).toLocaleString(void 0,{month:"long"}),n=`
      <div style="margin-bottom:16px">
        <div style="font-size:20px;font-weight:700;">${s("reports.company")}</div>
        <div style="font-size:14px;color:#374151;">${s("reports.export.clientPaymentsTitle")}</div>
        <div style="margin-top:8px;font-size:12px;color:#111827;">
          <div><strong>${s("reports.period")}:</strong> ${a} ${d}</div>
        </div>
      </div>`,r=o===0?"all":String(o);z(`${s("reports.export.clientPaymentsTitle")} ${d}-${r}`,n+t)};function G(t){if(t==null)return"";const a=String(t);return/[",\n]/.test(a)?'"'+a.replace(/"/g,'""')+'"':a}function C(t,a,n){const r=a.map(G).join(","),i=n.map(g=>g.map(G).join(",")),u=[r,...i].join(`
`),I=new Blob([u],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(I),j=document.createElement("a");j.href=P,j.download=t,j.click(),URL.revokeObjectURL(P)}const Ne=()=>{const t=new Date().toISOString().replace(/[:T]/g,"-").slice(0,16),a=_.map(r=>[r.zone_id,r.zone_name,r.clients_count,r.amount_to_pay,r.amount_paid,r.amount_remaining]),n=o===0?"all":String(o);C(`zones_summary_${d}-${n}_${N||"all"}_${t}.csv`,["Zone ID",s("reports.columns.zone"),s("reports.columns.clients"),s("reports.columns.toPay"),s("reports.columns.paid"),s("reports.columns.remaining")],a)},be=()=>{const t=new Date().toISOString().replace(/[:T]/g,"-").slice(0,16),a=k.map(r=>[r.client_id,r.client_username??"",r.amount_to_pay,r.amount_paid,r.amount_remaining]),n=o===0?"all":String(o);C(`chief_clients_${d}-${n}_${y}_${t}.csv`,["Client ID",s("reports.client"),s("reports.columns.toPay"),s("reports.columns.paid"),s("reports.columns.remaining")],a)},we=()=>{const t=new Date().toISOString().replace(/[:T]/g,"-").slice(0,16),a=R.map(r=>[r.id,r.completed_at??"",r.client_username??r.client_id??"",r.amount,r.currency??"",r.status??""]),n=o===0?"all":String(o);C(`chief_payments_${d}-${n}_${x}_${t}.csv`,["Payment ID",s("reports.date"),s("reports.client"),s("reports.amount"),s("reports.currency"),s("reports.status")],a)},Se=()=>{const t=new Date().toISOString().replace(/[:T]/g,"-").slice(0,16),a=L.map(r=>[r.id,r.completed_at??"",r.amount,r.currency??"",r.status??""]),n=o===0?"all":String(o);C(`my_payments_${d}-${n}_${x}_${t}.csv`,["Payment ID",s("reports.date"),s("reports.amount"),s("reports.currency"),s("reports.status")],a)},$e=t=>{B(t),c==="manager"&&t&&H("")},_e=t=>{H(t),c==="manager"&&t&&B("")};l.useEffect(()=>{const t=localStorage.getItem("token");if(!t){Q("/login",{replace:!0});return}m(!0),h(null),fetch(`${f}/api/me`,{headers:{Authorization:`Bearer ${t}`}}).then(async a=>{var r;const n=await a.json();if(!a.ok)throw new Error((n==null?void 0:n.error)||"Failed to load user");W(((r=n==null?void 0:n.user)==null?void 0:r.role)??null)}).catch(a=>h((a==null?void 0:a.message)||"Failed to load user")).finally(()=>m(!1))},[]),l.useEffect(()=>{const t=localStorage.getItem("token");if(!t||!c||c!=="manager"&&c!=="supervisor")return;m(!0),h(null),fetch(`${f}/api/zones${c==="supervisor"?"?scope=supervisor":""}`,{headers:{Authorization:`Bearer ${t}`}}).then(async n=>{const r=await n.json();if(!n.ok)throw new Error((r==null?void 0:r.error)||"Failed to load zones");const i=(r.zones||[]).map(u=>({id:u.id,zone_name:u.zone_name}));oe(i)}).catch(n=>h((n==null?void 0:n.message)||"Failed to load zones")).finally(()=>m(!1))},[c]),l.useEffect(()=>{const t=localStorage.getItem("token");!t||c!=="manager"||(m(!0),h(null),fetch(`${f}/api/report/supervisors`,{headers:{Authorization:`Bearer ${t}`}}).then(async a=>{const n=await a.json();if(!a.ok)throw new Error((n==null?void 0:n.error)||"Failed to load supervisors");ue(Array.isArray(n.supervisors)?n.supervisors:[])}).catch(a=>h((a==null?void 0:a.message)||"Failed to load supervisors")).finally(()=>m(!1)))},[c]),l.useEffect(()=>{const t=localStorage.getItem("token");if(!(!t||!c))if(m(!0),h(null),c==="chief"){const a=new URLSearchParams;a.set("year",String(d)),o>0&&a.set("month",String(o)),a.set("filter",y),fetch(`${f}/api/report/clients-summary?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}}).then(async r=>{const i=await r.json();if(!r.ok)throw new Error((i==null?void 0:i.error)||"Failed to load summary");re(Array.isArray(i.clients)?i.clients:[])}).catch(r=>h((r==null?void 0:r.message)||"Failed to load summary")).finally(()=>m(!1));const n=new URLSearchParams;n.set("year",String(d)),o>0&&n.set("month",String(o)),fetch(`${f}/api/report/payments?${n.toString()}`,{headers:{Authorization:`Bearer ${t}`}}).then(async r=>{const i=await r.json();if(!r.ok)throw new Error((i==null?void 0:i.error)||"Failed to load payments");ne(Array.isArray(i.payments)?i.payments:[]),ae(i.totals||null)}).catch(r=>h((r==null?void 0:r.message)||"Failed to load payments"))}else if(c==="manager"||c==="supervisor"){const a=new URLSearchParams;a.set("year",String(d)),o>0&&a.set("month",String(o)),a.set("filter",N),v&&a.set("zoneId",v),c==="manager"&&$&&a.set("supervisorId",$),fetch(`${f}/api/report/zones-summary?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}}).then(async n=>{const r=await n.json();if(!n.ok)throw new Error((r==null?void 0:r.error)||"Failed to load zones summary");ie(Array.isArray(r.rows)?r.rows:[]),ce(r.totals||null)}).catch(n=>h((n==null?void 0:n.message)||"Failed to load zones summary")).finally(()=>m(!1))}else if(c==="client"){const a=new URLSearchParams;a.set("year",String(d)),o>0&&a.set("month",String(o)),fetch(`${f}/api/report/payments?${a.toString()}`,{headers:{Authorization:`Bearer ${t}`}}).then(async n=>{const r=await n.json();if(!n.ok)throw new Error((r==null?void 0:r.error)||"Failed to load payments");de(Array.isArray(r.payments)?r.payments:[]),pe(r.totals||null)}).catch(n=>h((n==null?void 0:n.message)||"Failed to load payments")).finally(()=>m(!1))}else m(!1)},[c,d,o,N,v,$,y]);const J=t=>{if(!t)return!1;const a=new Date(t);if(w){const n=new Date(w);if(a<n)return!1}if(S){const n=new Date(S);if(n.setHours(23,59,59,999),a>n)return!1}return!0},K=t=>x==="all"?!0:(t||"").toLowerCase()===x,R=l.useMemo(()=>E.filter(t=>J(t.completed_at)&&K(t.status)),[E,w,S,x]),L=l.useMemo(()=>M.filter(t=>J(t.completed_at)&&K(t.status)),[M,w,S,x]);return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:s("reports.title")}),e.jsxs("div",{className:"mb-4 flex flex-wrap items-end gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.year")}),e.jsx("select",{className:"mt-1 border rounded px-2 py-2",value:d,onChange:t=>te(Number(t.target.value)),children:Array.from({length:6}).map((t,a)=>{const n=new Date().getFullYear()-a;return e.jsx("option",{value:n,children:n},n)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.month")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:o,onChange:t=>se(Number(t.target.value)),children:[e.jsx("option",{value:0,children:s("reports.filters.all")}),Array.from({length:12}).map((t,a)=>{const n=a+1,i=new Date(2e3,a,1).toLocaleString(void 0,{month:"long"});return e.jsx("option",{value:n,children:i},n)})]})]}),(c==="manager"||c==="supervisor")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.zone")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:v,onChange:t=>$e(t.target.value),children:[e.jsx("option",{value:"",children:s("reports.allZones")}),U.map(t=>e.jsx("option",{value:t.id,children:t.zone_name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.paidRemaining")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:N,onChange:t=>le(t.target.value),children:[e.jsx("option",{value:"all",children:s("reports.filters.all")}),e.jsx("option",{value:"paid",children:s("reports.filters.paid")}),e.jsx("option",{value:"remaining",children:s("reports.filters.remaining")})]})]}),c==="manager"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.supervisor")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:$,onChange:t=>_e(t.target.value),children:[e.jsx("option",{value:"",children:s("reports.allSupervisors")}),Z.map(t=>e.jsx("option",{value:t.id,children:t.username},t.id))]})]}),e.jsxs("div",{className:"self-end pb-1 flex items-center gap-2",children:[e.jsx("button",{onClick:Ne,className:"px-3 py-2 rounded bg-amber-600 text-white",children:s("reports.downloadCsv")}),e.jsx("button",{onClick:fe,className:"px-3 py-2 rounded bg-amber-700 text-white",children:s("reports.downloadPdf")})]})]}),c==="chief"&&e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("div",{className:"text-sm text-gray-600",children:s("reports.chief.showingClients")}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.paidRemaining")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:y,onChange:t=>ge(t.target.value),children:[e.jsx("option",{value:"all",children:s("reports.filters.all")}),e.jsx("option",{value:"paid",children:s("reports.filters.paid")}),e.jsx("option",{value:"remaining",children:s("reports.filters.remaining")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.startDate")}),e.jsx("input",{type:"date",className:"mt-1 border rounded px-2 py-2",value:w,onChange:t=>me(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.endDate")}),e.jsx("input",{type:"date",className:"mt-1 border rounded px-2 py-2",value:S,onChange:t=>he(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700",children:s("reports.filters.status")}),e.jsxs("select",{className:"mt-1 border rounded px-2 py-2",value:x,onChange:t=>xe(t.target.value),children:[e.jsx("option",{value:"all",children:s("reports.status.all")}),e.jsx("option",{value:"success",children:s("reports.status.success")}),e.jsx("option",{value:"failed",children:s("reports.status.failed")}),e.jsx("option",{value:"pending",children:s("reports.status.pending")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:be,className:"px-3 py-2 rounded bg-amber-600 text-white",children:s("reports.downloadCsv")}),e.jsx("button",{onClick:ye,className:"px-3 py-2 rounded bg-amber-700 text-white",children:s("reports.downloadPdf")})]})]}),c==="client"&&e.jsx("div",{className:"text-sm text-gray-600",children:s("reports.client.showingSummary")})]}),A&&e.jsx("div",{className:"text-red-600 mb-3",children:A}),X?e.jsx("div",{className:"py-8 flex items-center justify-center",children:e.jsx(ke,{})}):e.jsxs(e.Fragment,{children:[(c==="manager"||c==="supervisor")&&e.jsx("div",{ref:O,className:"bg-white rounded-lg shadow overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.columns.zone")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.clients")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.toPay")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.paid")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.remaining")})]})}),e.jsxs("tbody",{children:[_.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx(Pe,{className:"text-amber-700 hover:underline",to:`/zones/${t.zone_id}`,children:t.zone_name})}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(t.clients_count)}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(t.amount_to_pay)}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(t.amount_paid)}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(t.amount_remaining)})]},t.zone_id)),!_.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-gray-500",colSpan:5,children:s("reports.noData")})})]}),b&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t",children:[e.jsx("td",{className:"px-4 py-3 text-right",children:s("reports.totals")}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(b.clients_count)}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(b.amount_to_pay)}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(b.amount_paid)}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(b.amount_remaining)})]})})]})}),c==="chief"&&e.jsx("div",{ref:Y,className:"bg-white rounded-lg shadow overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.client")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.toPay")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.paid")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.columns.remaining")})]})}),e.jsxs("tbody",{children:[k.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:t.client_username||t.client_id}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(t.amount_to_pay)}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(t.amount_paid)}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(t.amount_remaining)})]},t.client_id)),!k.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-gray-500",colSpan:4,children:s("reports.noData")})})]})]})}),c==="chief"&&e.jsxs("div",{ref:q,className:"bg-white rounded-lg shadow overflow-auto mt-6",children:[e.jsxs("div",{className:"px-4 py-3 font-semibold flex items-center justify-between",children:[e.jsx("span",{children:s("reports.payments.heading")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:we,className:"px-3 py-1 rounded bg-amber-600 text-white",children:s("reports.downloadCsv")}),e.jsx("button",{onClick:je,className:"px-3 py-1 rounded bg-amber-700 text-white",children:s("reports.downloadPdf")})]})]}),e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.date")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.client")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.amount")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.currency")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.status")})]})}),e.jsxs("tbody",{children:[R.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:t.completed_at?new Date(t.completed_at).toLocaleString():"-"}),e.jsx("td",{className:"px-4 py-3",children:t.client_username||t.client_id}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(t.amount)}),e.jsx("td",{className:"px-4 py-3",children:t.currency||""}),e.jsx("td",{className:"px-4 py-3",children:t.status||""})]},t.id)),!R.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-gray-500",colSpan:5,children:s("reports.noData")})})]}),D&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t",children:[e.jsx("td",{className:"px-4 py-3 text-right",colSpan:2,children:s("reports.totals")}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(D.amount_sum)}),e.jsxs("td",{className:"px-4 py-3",colSpan:2,children:[s("reports.count"),": ",p.format(D.count)]})]})})]})]}),c==="client"&&e.jsxs("div",{ref:V,className:"bg-white rounded-lg shadow overflow-auto",children:[e.jsxs("div",{className:"px-4 py-3 font-semibold flex items-center justify-between",children:[e.jsx("span",{children:s("reports.myPayments.heading")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Se,className:"px-3 py-1 rounded bg-amber-600 text-white",children:s("reports.downloadCsv")}),e.jsx("button",{onClick:ve,className:"px-3 py-1 rounded bg-amber-700 text-white",children:s("reports.downloadPdf")})]})]}),e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.date")}),e.jsx("th",{className:"px-4 py-3 text-right",children:s("reports.amount")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.currency")}),e.jsx("th",{className:"px-4 py-3 text-left",children:s("reports.status")})]})}),e.jsxs("tbody",{children:[L.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:t.completed_at?new Date(t.completed_at).toLocaleString():"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(t.amount)}),e.jsx("td",{className:"px-4 py-3",children:t.currency||""}),e.jsx("td",{className:"px-4 py-3",children:t.status||""})]},t.id)),!L.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-gray-500",colSpan:4,children:s("reports.noData")})})]}),F&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t",children:[e.jsx("td",{className:"px-4 py-3 text-right",children:s("reports.totals")}),e.jsx("td",{className:"px-4 py-3 text-right",children:p.format(F.amount_sum)}),e.jsxs("td",{className:"px-4 py-3",colSpan:2,children:[s("reports.count"),": ",p.format(F.count)]})]})})]})]})]})]})};export{Le as default};
