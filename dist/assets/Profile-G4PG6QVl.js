import{u as Be,j as e}from"./index-B34CxXhK.js";import{r as l,u as Oe,f as Ue}from"./react-BeLGUnOF.js";const f="http://localhost:4000",_e=()=>{const{t,lang:ye,setLang:ve}=Be(),[I,Y]=l.useState(""),[B,Z]=l.useState(""),[C,ee]=l.useState(""),[O,te]=l.useState(""),[w,U]=l.useState(""),[re,o]=l.useState(null),[se,d]=l.useState(null),[i,ae]=l.useState(!1),[m,le]=l.useState(""),[T,E]=l.useState(!1),[we,z]=l.useState(!1),[j,oe]=l.useState(""),[ne,ie]=l.useState(!1),[_,ce]=l.useState(!1),[p,de]=l.useState(0),[A,R]=l.useState(!1),[J,M]=l.useState(!1),[V,D]=l.useState(!1),[W,q]=l.useState(!1),[me,N]=l.useState(!1),ue=l.useRef(null),[k,P]=l.useState(null),[H,$]=l.useState(!1),[je,K]=l.useState("verify"),[h,G]=l.useState(""),[x,Q]=l.useState(""),[S,X]=l.useState(""),[g,F]=l.useState(!1),[fe,c]=l.useState(null),[pe,b]=l.useState(null),[y,v]=l.useState(null);l.useEffect(()=>{const s=localStorage.getItem("token");s&&fetch(`${f}/api/profile`,{headers:{Authorization:`Bearer ${s}`}}).then(async r=>{const a=await r.json();if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to load profile");const n=a.profile||{};ee(n.username||""),Y(n.first_name||""),Z(n.last_name||""),te(n.phone_number||""),U(n.profile_image_url||""),le(n.email||""),E(!!n.email_verified)}).catch(r=>o(r.message||"Failed to load profile"))},[]);function Ne(s){U(s.target.value)}function ke(){var s;(s=ue.current)==null||s.click()}function Se(s){var n;const r=(n=s.target.files)==null?void 0:n[0];if(!r)return;const a=new FileReader;a.onload=()=>{const u=String(a.result||"");P(u),N(!0)},a.readAsDataURL(r)}async function Ce(s){if(s.preventDefault(),o(null),d(null),!C.trim()){o("Username is required.");return}const r=localStorage.getItem("token");if(!r){o("Not authenticated");return}ae(!0);try{let a=w;if(k){const be=await fetch(`${f}/api/profile/upload-base64`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({dataUrl:k})}),L=await be.json();if(!be.ok)throw new Error((L==null?void 0:L.error)||"Failed to upload image");a=L.profile_image_url||a,U(a)}const n=await fetch(`${f}/api/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({firstName:I,lastName:B,username:C,phone:O,profileImageUrl:a})}),u=await n.json();if(!n.ok)throw new Error((u==null?void 0:u.error)||"Failed to save profile");d("Profile saved successfully!"),R(!1),M(!1),D(!1),q(!1),N(!1),P(null)}catch(a){o((a==null?void 0:a.message)||"Failed to save profile")}finally{ae(!1)}}const he=A||J||V||W||me,Ee=he&&y!==null;async function Pe(){if(c(null),b(null),!h){c("Enter your current password");return}const s=localStorage.getItem("token");if(!s){c("Not authenticated");return}try{F(!0);const r=await fetch(`${f}/api/profile/password/verify`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({oldPassword:h})}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Old password is incorrect");K("new"),b("Old password verified")}catch(r){c((r==null?void 0:r.message)||"Failed to verify password")}finally{F(!1)}}async function $e(){if(c(null),b(null),!x||!S){c("Fill in all fields");return}if(x!==S){c("Passwords do not match");return}const s=localStorage.getItem("token");if(!s){c("Not authenticated");return}try{F(!0);const r=await fetch(`${f}/api/profile/password/change`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({oldPassword:h,newPassword:x})}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to change password");b("Password changed successfully"),G(""),Q(""),X(""),K("verify")}catch(r){c((r==null?void 0:r.message)||"Failed to change password")}finally{F(!1)}}async function Fe(){o(null),d(null);const s=localStorage.getItem("token");if(!s){o("Not authenticated");return}if(!/^\S+@\S+\.\S+$/.test(m)){o("Enter a valid email");return}try{const r=await fetch(`${f}/api/profile/email`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({email:m})}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to save email");z(!1),E(!!((a==null?void 0:a.email_verified)??!1)),d("Email saved")}catch(r){o((r==null?void 0:r.message)||"Failed to save email")}}async function Le(){o(null),d(null);const s=localStorage.getItem("token");if(!s){o("Not authenticated");return}if(!/^\S+@\S+\.\S+$/.test(m)){o("Enter a valid email first");return}try{ie(!0);const r=await fetch(`${f}/api/profile/email/send-code`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({email:m})}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Failed to send verification code");d("Verification code sent"),de(60)}catch(r){o((r==null?void 0:r.message)||"Failed to send code")}finally{ie(!1)}}async function Ie(){o(null),d(null);const s=localStorage.getItem("token");if(!s){o("Not authenticated");return}if(!j.trim()){o("Enter the verification code");return}try{ce(!0);const r=await fetch(`${f}/api/profile/email/verify-code`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({code:j})}),a=await r.json().catch(()=>({}));if(!r.ok)throw new Error((a==null?void 0:a.error)||"Invalid or expired code");E(!0),oe(""),d("Email verified")}catch(r){o((r==null?void 0:r.message)||"Failed to verify code")}finally{ce(!1)}}l.useEffect(()=>{if(p<=0)return;const s=setInterval(()=>de(r=>r-1),1e3);return()=>clearInterval(s)},[p]);const xe=Oe(),ge=Ue();return l.useEffect(()=>{const r=new URLSearchParams(xe.search).get("email_verify_token");r&&(async()=>{try{const a=localStorage.getItem("token");if(!a)return;const n=await fetch(`${f}/api/profile/email/verify-link`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({token:r})}),u=await n.json().catch(()=>({}));if(!n.ok)throw new Error((u==null?void 0:u.error)||"Failed to verify email");E(!0),d("Email verified")}catch(a){o((a==null?void 0:a.message)||"Email verification failed")}finally{ge("/profile",{replace:!0})}})()},[xe.search,ge]),l.useEffect(()=>{function s(r){r.key==="Escape"&&$(!1)}if(H)return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[H]),e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-charcoal",children:t("profile.title")}),e.jsx("p",{className:"text-gray-600 mt-2",children:t("profile.subtitle")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:t("common.language")}),e.jsxs("select",{value:ye,onChange:s=>ve(s.target.value),className:"border rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"en",children:t("lang.english")}),e.jsx("option",{value:"rw",children:t("lang.kinyarwanda")})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("form",{onSubmit:Ce,className:"p-6 sm:p-8",children:[re&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:re})]}),se&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl text-green-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:se})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-4",children:t("profile.photo.title")}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 overflow-hidden flex items-center justify-center border-4 border-white shadow-lg",children:k||w?e.jsx("button",{type:"button",onClick:()=>$(!0),className:"block w-full h-full focus:outline-none focus:ring-2 focus:ring-amber-500 cursor-zoom-in","aria-label":"View profile image",title:"Click to view",children:e.jsx("img",{src:k||w,alt:"Profile",className:"w-full h-full object-cover"})}):e.jsxs("div",{className:"text-gray-400 flex flex-col items-center",children:[e.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"text-xs mt-1",children:t("profile.photo.noImage")})]})}),e.jsx("div",{className:"flex flex-col space-y-3 w-full",children:me?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:ke,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors font-medium text-sm",children:t("profile.photo.chooseFile")}),e.jsx("input",{ref:ue,type:"file",accept:"image/*",onChange:Se,className:"hidden"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2",children:t("profile.photo.orUrl")}),e.jsx("input",{type:"url",value:w,onChange:Ne,placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent text-sm"})]}),e.jsx("button",{type:"button",onClick:()=>{N(!1),P(null)},className:"px-4 py-2 bg-gray-100 text-charcoal rounded-lg hover:bg-gray-200 transition-colors font-medium text-sm mt-2",children:t("profile.cancel")}),y==="image"&&e.jsx("div",{className:"mt-3",children:e.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 rounded-lg text-sm font-medium ${i?"bg-amber-400 cursor-not-allowed text-white":"bg-amber-600 hover:bg-amber-700 text-white"}`,children:t("profile.saveChanges")})})]}):e.jsx("button",{type:"button",onClick:()=>{N(!0),v("image")},className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors font-medium text-sm",children:t("profile.photo.change")})})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-6",children:t("profile.personalInfo")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-charcoal",children:t("profile.firstName")}),e.jsx("button",{type:"button",onClick:()=>R(s=>{const r=!s;return r&&v("first"),r}),className:"text-xs text-amber-600 hover:text-amber-700 font-medium",children:t(A?"profile.cancel":"profile.edit")})]}),A?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"w-full px-3 py-2 rounded-lg border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:I,onChange:s=>Y(s.target.value),placeholder:t("profile.placeholder.firstName")}),y==="first"&&e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 rounded-lg text-sm font-medium ${i?"bg-amber-400 cursor-not-allowed text-white":"bg-amber-600 hover:bg-amber-700 text-white"}`,children:t("profile.saveChanges")})})]}):e.jsx("div",{className:"w-full px-3 py-2 rounded-lg text-charcoal",children:I||"-"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-charcoal",children:t("profile.lastName")}),e.jsx("button",{type:"button",onClick:()=>M(s=>{const r=!s;return r&&v("last"),r}),className:"text-xs text-amber-600 hover:text-amber-700 font-medium",children:t(J?"profile.cancel":"profile.edit")})]}),J?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"w-full px-3 py-2 rounded-lg border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:B,onChange:s=>Z(s.target.value),placeholder:t("profile.placeholder.lastName")}),y==="last"&&e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 rounded-lg text-sm font-medium ${i?"bg-amber-400 cursor-not-allowed text-white":"bg-amber-600 hover:bg-amber-700 text-white"}`,children:t("profile.saveChanges")})})]}):e.jsx("div",{className:"w-full px-3 py-2 rounded-lg text-charcoal",children:B||"-"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-charcoal",children:t("profile.username")}),e.jsx("button",{type:"button",onClick:()=>D(s=>{const r=!s;return r&&v("username"),r}),className:"text-xs text-amber-600 hover:text-amber-700 font-medium",children:t(V?"profile.cancel":"profile.edit")})]}),V?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"w-full px-3 py-2 rounded-lg border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:C,onChange:s=>ee(s.target.value),placeholder:t("profile.placeholder.username")}),y==="username"&&e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 rounded-lg text-sm font-medium ${i?"bg-amber-400 cursor-not-allowed text-white":"bg-amber-600 hover:bg-amber-700 text-white"}`,children:t("profile.saveChanges")})})]}):e.jsx("div",{className:"w-full px-3 py-2 rounded-lg text-charcoal",children:C||"-"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-charcoal",children:t("profile.phoneNumber")}),e.jsx("button",{type:"button",onClick:()=>q(s=>{const r=!s;return r&&v("phone"),r}),className:"text-xs text-amber-600 hover:text-amber-700 font-medium",children:t(W?"profile.cancel":"profile.edit")})]}),W?e.jsxs(e.Fragment,{children:[e.jsx("input",{className:"w-full px-3 py-2 rounded-lg border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:O,onChange:s=>te(s.target.value),placeholder:t("profile.placeholder.phone")}),y==="phone"&&e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"submit",disabled:i,className:`px-4 py-2 rounded-lg text-sm font-medium ${i?"bg-amber-400 cursor-not-allowed text-white":"bg-amber-600 hover:bg-amber-700 text-white"}`,children:t("profile.saveChanges")})})]}):e.jsx("div",{className:"w-full px-3 py-2 rounded-lg text-charcoal",children:O||"-"})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 lg:col-span-3",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:t("profile.changePassword.title")}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t("profile.changePassword.subtitle")})]})}),e.jsxs("div",{className:"mt-4 space-y-3",children:[fe&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:fe}),pe&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded text-green-700 text-sm",children:pe}),je==="verify"?e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-charcoal",children:t("profile.password.current")}),e.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-lg border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:h,onChange:s=>G(s.target.value),placeholder:t("profile.password.placeholder.current")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:Pe,disabled:g||!h,className:`px-4 py-2 rounded-lg text-sm font-medium ${g||!h?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-amber-600 hover:bg-amber-700 text-white"}`,children:t(g?"profile.password.verifying":"profile.password.verify")}),e.jsx("button",{type:"button",onClick:()=>{G(""),c(null),b(null)},className:"px-4 py-2 rounded-lg bg-gray-100 text-charcoal hover:bg-gray-200 text-sm font-medium",children:t("profile.clear")})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-charcoal",children:t("profile.password.new")}),e.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-lg border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:x,onChange:s=>Q(s.target.value),placeholder:t("profile.password.placeholder.new")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-charcoal",children:t("profile.password.confirm")}),e.jsx("input",{type:"password",className:"w-full px-3 py-2 rounded-lg border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:S,onChange:s=>X(s.target.value),placeholder:t("profile.password.placeholder.confirm")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:$e,disabled:g||!x||!S,className:`px-4 py-2 rounded-lg text-sm font-medium ${g||!x||!S?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-amber-600 hover:bg-amber-700 text-white"}`,children:t(g?"profile.password.saving":"profile.password.change")}),e.jsx("button",{type:"button",onClick:()=>{K("verify"),Q(""),X(""),c(null),b(null)},className:"px-4 py-2 rounded-lg bg-gray-100 text-charcoal hover:bg-gray-200 text-sm font-medium",children:t("profile.back")})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 lg:col-span-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:t("profile.email.title")}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t("profile.email.subtitle")})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border ${T?"bg-green-50 text-green-700 border-green-200":"bg-amber-50 text-amber-700 border-amber-200"}`,children:t(T?"profile.verified":"profile.unverified")})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[we?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:m,onChange:s=>le(s.target.value),placeholder:t("profile.email.placeholder"),type:"email"}),e.jsx("button",{type:"button",onClick:Fe,className:"px-4 py-2 rounded-lg bg-amber-600 hover:bg-amber-700 text-white text-sm font-medium",children:t("profile.email.save")}),e.jsx("button",{type:"button",onClick:()=>z(!1),className:"px-4 py-2 rounded-lg bg-gray-100 text-charcoal hover:bg-gray-200 text-sm font-medium",children:t("profile.cancel")})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"w-full px-3 py-2 rounded-lg text-charcoal bg-white border border-gray-200",children:m||"-"}),e.jsx("button",{type:"button",onClick:()=>z(!0),className:"shrink-0 px-4 py-2 rounded-lg bg-white text-amber-700 border border-amber-200 hover:bg-amber-50 text-sm font-medium",children:t(m?"profile.email.edit":"profile.email.add")})]}),!T&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{type:"button",onClick:Le,disabled:ne||p>0||!m,className:`px-4 py-2 rounded-lg text-sm font-medium border ${ne||p>0||!m?"bg-gray-100 text-gray-500 border-gray-200 cursor-not-allowed":"bg-white text-amber-700 border-amber-200 hover:bg-amber-50"}`,children:p>0?t("profile.email.resendIn",{secs:p}):t("profile.email.sendCode")}),e.jsxs("div",{className:"flex-1 flex items-stretch gap-2",children:[e.jsx("input",{className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 bg-white focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",value:j,onChange:s=>oe(s.target.value),placeholder:t("profile.email.codePlaceholder")}),e.jsx("button",{type:"button",onClick:Ie,disabled:_||!j.trim(),className:`px-4 py-2 rounded-lg text-sm font-medium ${_||!j.trim()?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-amber-600 hover:bg-amber-700 text-white"}`,children:t(_?"profile.email.verifying":"profile.email.verify")})]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:t("profile.email.tip")})]})]})]})]}),he&&!Ee&&e.jsxs("div",{className:"mt-8 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{R(!1),M(!1),D(!1),q(!1),N(!1),P(null),d(null),o(null),v(null)},className:"px-6 py-2 bg-gray-100 text-charcoal rounded-lg hover:bg-gray-200 transition-colors font-medium",children:t("profile.cancel")}),e.jsx("button",{type:"submit",disabled:i,className:`px-6 py-2 rounded-lg font-medium transition-colors ${i?"bg-amber-400 cursor-not-allowed text-white":"bg-amber-600 hover:bg-amber-700 text-white"}`,children:i?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2v4m0 12v4m8-10h-4M6 12H2"})}),e.jsx("span",{children:t("profile.password.saving")})]}):t("profile.saveChanges")})]})]})})]}),H&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",onClick:()=>$(!1),"aria-modal":"true",role:"dialog",children:e.jsxs("div",{className:"relative max-w-3xl w-full",onClick:s=>s.stopPropagation(),children:[e.jsx("img",{src:k||w,alt:"Profile full",className:"w-full h-auto rounded-lg shadow-lg"}),e.jsx("button",{type:"button",onClick:()=>$(!1),className:"absolute top-2 right-2 inline-flex items-center justify-center rounded-full bg-black/60 text-white w-9 h-9 hover:bg-black/80 focus:outline-none focus:ring-2 focus:ring-amber-500","aria-label":"Close",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),e.jsx("style",{children:`
        .text-charcoal {
          color: #1E1E1E;
        }
        .bg-amber-600 {
          background-color: #D97706;
        }
        .bg-amber-700 {
          background-color: #B45309;
        }
        .text-amber-600 {
          color: #D97706;
        }
        .text-amber-700 {
          color: #B45309;
        }
        .focus\\:ring-amber-500:focus {
          --tw-ring-color: #D97706;
        }
      `})]})};export{_e as default};
