import{j as e}from"./index-Cb5Y6uas.js";import{g as L,f as B,r as c}from"./react-CzDbI3ao.js";const M="http://localhost:4000",s={primary:"#D97706",primaryLight:"#FBBF24",primaryHover:"#B45309",accent:"#15803D",background:"#F9FAFB",cardBg:"#FFFFFF",border:"#E2E8F0",text:"#1E1E1E",textLight:"#64748B",textLighter:"#94A3B8",error:"#DC2626",errorLight:"#FEF2F2",success:"#15803D",warning:"#D97706"},o={Back:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Users:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),Money:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),Calendar:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Today:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Crown:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Settings:t=>e.jsxs("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),UserPlus:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),Refresh:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},d=({children:t,className:l="",padding:r="p-6"})=>e.jsx("div",{className:`rounded-2xl shadow-sm border transition-all duration-300 hover:shadow-md ${r} ${l}`,style:{backgroundColor:s.cardBg,borderColor:s.border},children:t}),w=({children:t,onClick:l,disabled:r=!1,loading:n=!1,size:a="md",className:i=""})=>{const p={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return e.jsxs("button",{onClick:l,disabled:r||n,className:`rounded-xl font-semibold text-white transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl active:scale-95 ${p[a]} ${i}`,style:{backgroundColor:r?s.textLighter:s.primary,cursor:r?"not-allowed":"pointer",opacity:r?.6:1},onMouseOver:m=>{!r&&!n&&(m.currentTarget.style.backgroundColor=s.primaryHover)},onMouseOut:m=>{!r&&!n&&(m.currentTarget.style.backgroundColor=s.primary)},children:[n&&e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),t]})},F=()=>{const{id:t}=L(),l=B(),[r,n]=c.useState(null),[a,i]=c.useState({amountToBePaid:null,currentMonthPaid:null,todayPaid:null}),[p,m]=c.useState(!1),[y,N]=c.useState(null),[u,C]=c.useState(!1),[b,k]=c.useState(!1),v=async()=>{const g=localStorage.getItem("token");if(!(!g||!t)){k(!0),N(null);try{const x=await fetch(`${M}/api/zones/${t}`,{headers:{Authorization:`Bearer ${g}`}}),h=await x.json();if(!x.ok)throw new Error((h==null?void 0:h.error)||"Failed to load zone");n(h.zone),i(h.payments||{amountToBePaid:null,currentMonthPaid:null,todayPaid:null})}catch(x){N((x==null?void 0:x.message)||"Failed to load zone")}finally{m(!1),k(!1)}}};return c.useEffect(()=>{v()},[t]),p?e.jsx("div",{className:"min-h-screen p-6 flex items-center justify-center",style:{backgroundColor:s.background},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:s.primary}}),e.jsx("div",{className:"text-lg",style:{color:s.textLight},children:"Loading zone detailsâ€¦"})]})}):y?e.jsx("div",{className:"min-h-screen p-6 flex items-center justify-center",style:{backgroundColor:s.background},children:e.jsxs(d,{className:"text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:s.errorLight},children:e.jsx("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:s.error}})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:s.error},children:"Error Loading Zone"}),e.jsx("p",{className:"mb-4",style:{color:s.textLight},children:y}),e.jsxs(w,{onClick:v,loading:b,children:[e.jsx(o.Refresh,{className:"w-4 h-4"}),"Try Again"]})]})}):r?e.jsx("div",{className:"min-h-screen p-4 lg:p-6",style:{backgroundColor:s.background},children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>l(-1),className:"flex items-center gap-2 p-3 rounded-2xl transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:s.cardBg,color:s.textLight},children:[e.jsx(o.Back,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Back to Zones"})]}),e.jsx("div",{className:"w-px h-8",style:{backgroundColor:s.border}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",style:{color:s.text},children:"Zone Details"}),e.jsx("p",{className:"text-lg mt-2",style:{color:s.textLight},children:"Comprehensive overview and management"})]})]}),e.jsxs(w,{onClick:v,loading:b,size:"md",className:"flex items-center gap-2",children:[e.jsx(o.Refresh,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh Data"})]})]}),e.jsx(d,{padding:"p-6 lg:p-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:s.primary}}),e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold",style:{color:s.text},children:r.zone_name}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-semibold",style:{backgroundColor:s.primaryLight,color:s.text},children:["Zone #",r.id]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o.Users,{className:"w-5 h-5",style:{color:s.primary}}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",style:{color:s.text},children:[r.cell,", ",r.village]}),e.jsx("div",{className:"text-sm",style:{color:s.textLight},children:"Location"})]})]}),r.description&&e.jsxs("div",{className:"p-4 rounded-xl",style:{backgroundColor:s.background},children:[e.jsx("div",{className:"text-sm font-semibold mb-1",style:{color:s.text},children:"Description"}),e.jsx("div",{className:"text-sm",style:{color:s.textLight},children:r.description})]})]})]}),e.jsxs("div",{className:"lg:text-right",children:[e.jsx("div",{className:"text-2xl font-bold mb-2",style:{color:s.primary},children:r.client_count}),e.jsx("div",{className:"text-sm font-semibold",style:{color:s.textLight},children:"Total Clients"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(j,{icon:e.jsx(o.Crown,{className:"w-6 h-6"}),title:"Zone Chief",value:r.chief_username??"Unassigned",color:s.primary}),e.jsx(j,{icon:e.jsx(o.Users,{className:"w-6 h-6"}),title:"Total Clients",value:r.client_count.toString(),color:s.accent}),e.jsx(j,{icon:e.jsx(o.Money,{className:"w-6 h-6"}),title:"Amount To Be Paid",value:a.amountToBePaid!=null?`$${a.amountToBePaid.toLocaleString()}`:"N/A",color:s.warning}),e.jsx(j,{icon:e.jsx(o.Calendar,{className:"w-6 h-6"}),title:"Current Month Paid",value:a.currentMonthPaid!=null?`$${a.currentMonthPaid.toLocaleString()}`:"N/A",color:s.success})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(o.Today,{className:"w-6 h-6",style:{color:s.primary}}),e.jsx("h3",{className:"text-xl font-semibold",style:{color:s.text},children:"Today's Payments"})]}),e.jsx("div",{className:"text-3xl font-bold",style:{color:s.primary},children:a.todayPaid!=null?`$${a.todayPaid.toLocaleString()}`:"N/A"}),e.jsx("div",{className:"text-sm mt-2",style:{color:s.textLight},children:"Total payments collected today"})]}),e.jsxs(d,{padding:"p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o.Settings,{className:"w-6 h-6",style:{color:s.primary}}),e.jsx("h3",{className:"text-xl font-semibold",style:{color:s.text},children:"Zone Management"})]}),e.jsxs("button",{onClick:()=>C(g=>!g),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition-all duration-300 hover:scale-105 active:scale-95",style:{backgroundColor:u?s.primary:s.background,color:u?"white":s.text},children:[e.jsx(o.Settings,{className:"w-4 h-4"}),e.jsx("span",{children:u?"Hide Options":"Manage Zone"})]})]}),u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(f,{icon:e.jsx(o.Users,{className:"w-8 h-8"}),title:"Reassign Supervisor",description:"Assign a new supervisor to manage this zone",onClick:()=>l(`/register-supervisor?zoneId=${t}&reassign=1`),buttonText:"Reassign",color:s.primary}),e.jsx(f,{icon:e.jsx(o.Crown,{className:"w-8 h-8"}),title:"Reassign Zone Chief",description:"Assign a new chief to oversee daily operations",onClick:()=>l(`/register-chief?zoneId=${t}&reassign=1`),buttonText:"Reassign",color:s.accent}),e.jsx(f,{icon:e.jsx(o.UserPlus,{className:"w-8 h-8"}),title:"Add New Client",description:"Register a new client in this zone",onClick:()=>l(`/register-client?zoneId=${t}`),buttonText:"Add Client",color:s.success})]})]})]})}):e.jsx("div",{className:"min-h-screen p-6 flex items-center justify-center",style:{backgroundColor:s.background},children:e.jsxs(d,{className:"text-center max-w-md",children:[e.jsx(o.Users,{className:"w-16 h-16 mx-auto mb-4",style:{color:s.textLighter}}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:s.textLight},children:"Zone Not Found"}),e.jsx("p",{style:{color:s.textLighter},children:"The requested zone could not be found."})]})})};function j({icon:t,title:l,value:r,color:n}){return e.jsx(d,{padding:"p-6",className:"group hover:scale-[1.02] transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 group-hover:scale-110",style:{backgroundColor:`${n}15`},children:e.jsx("div",{style:{color:n},children:t})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",style:{color:s.textLight},children:l}),e.jsx("div",{className:"text-xl font-bold",style:{color:s.text},children:r})]})]})})}function f({icon:t,title:l,description:r,onClick:n,buttonText:a,color:i}){return e.jsx(d,{padding:"p-6",className:"group hover:scale-[1.02] transition-all duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 transition-all duration-300 group-hover:scale-110",style:{backgroundColor:`${i}15`},children:e.jsx("div",{style:{color:i},children:t})}),e.jsx("h4",{className:"text-lg font-semibold mb-2",style:{color:s.text},children:l}),e.jsx("p",{className:"text-sm mb-4",style:{color:s.textLight},children:r}),e.jsx("button",{onClick:n,className:"w-full px-4 py-3 rounded-xl font-semibold text-white transition-all duration-300 hover:shadow-lg active:scale-95",style:{backgroundColor:i},children:a})]})})}export{F as default};
