import{u as S,j as e}from"./index-B34CxXhK.js";import{r as s}from"./react-BeLGUnOF.js";const B=[{id:"c1",name:"Chief A"},{id:"c2",name:"Chief B"},{id:"c3",name:"Chief C"}],q=()=>{const{t:l}=S(),[n,m]=s.useState(""),[o,h]=s.useState(""),[i,x]=s.useState(""),[c,b]=s.useState(""),[r,f]=s.useState(null),[g,a]=s.useState(null),[d,p]=s.useState(!1),[j,v]=s.useState(null);async function E(t){if(t.preventDefault(),a(null),v(null),!n.trim()||!o.trim()||!i.trim()||!c.trim()){a("All fields except chief assignment are required.");return}const N=localStorage.getItem("token");if(!N){a("You must be logged in to create a zone.");return}const w=r&&/^\d+$/.test(r)?Number(r):null,k={zoneName:n,cell:o,village:i,description:c,assignedChief:w};try{p(!0);const y=await fetch("http://localhost:4000/api/zones",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N}`},body:JSON.stringify(k)}),u=await y.json();if(!y.ok)throw new Error((u==null?void 0:u.error)||"Failed to create zone");v("Zone created successfully."),m(""),h(""),x(""),b(""),f(null)}catch(C){a(C.message||"Failed to create zone")}finally{p(!1)}}return e.jsxs("div",{className:"p-6 max-w-3xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:l("sidebar.addNewZone")}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[g&&e.jsx("div",{className:"text-red-600",children:g}),j&&e.jsx("div",{className:"text-green-600",children:j}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:l("register.chief.zoneName")}),e.jsx("input",{value:n,onChange:t=>m(t.target.value),className:"mt-1 block w-full rounded-md border",style:{borderColor:"#E5E7EB"},required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:l("register.chief.cell")}),e.jsx("input",{value:o,onChange:t=>h(t.target.value),className:"mt-1 block w-full rounded-md border",style:{borderColor:"#E5E7EB"},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:l("register.chief.village")}),e.jsx("input",{value:i,onChange:t=>x(t.target.value),className:"mt-1 block w-full rounded-md border",style:{borderColor:"#E5E7EB"},required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:l("register.chief.locationDescription")}),e.jsx("textarea",{value:c,onChange:t=>b(t.target.value),className:"mt-1 block w-full rounded-md border",style:{borderColor:"#E5E7EB"},rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assign Chief (optional)"}),e.jsxs("select",{value:r??"",onChange:t=>f(t.target.value||null),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[e.jsx("option",{value:"",children:"-- None --"}),B.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:d,className:`px-4 py-2 text-white rounded-md ${d?"bg-amber-400":"bg-amber-600 hover:bg-amber-700"}`,children:d?"â€¦":l("register.common.save")})})]})]})};export{q as default};
