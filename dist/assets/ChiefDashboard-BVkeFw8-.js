import{u as E,j as e}from"./index-B9Qtw13a.js";import{r,L as a}from"./react-BeLGUnOF.js";import{U as D,B as k,W as L,C as P,a as S,H as B,b as C}from"./ui-DnAl6TrK.js";const R="http://localhost:4000",F=()=>{var g;const{t}=E(),[s,N]=r.useState(null),[u,o]=r.useState(!1),[d,m]=r.useState(null);function c(){const n=localStorage.getItem("token");n&&(o(!0),m(null),fetch(`${R}/api/chief/dashboard`,{headers:{Authorization:`Bearer ${n}`}}).then(async i=>{const l=await i.json();if(!i.ok)throw new Error((l==null?void 0:l.error)||"Failed to load");N(l)}).catch(i=>m((i==null?void 0:i.message)||"Failed to load")).finally(()=>o(!1)))}r.useEffect(()=>{c();function n(){c()}return window.addEventListener("payments-updated",n),()=>{window.removeEventListener("payments-updated",n)}},[]);const v=(s==null?void 0:s.chiefName)||"-",p=(s==null?void 0:s.zoneName)||((g=s==null?void 0:s.zones)!=null&&g.length?t("common.multipleZones"):"-"),x=(s==null?void 0:s.clientsTotal)||0,h=(s==null?void 0:s.amountTotal)||0,j=(s==null?void 0:s.amountPaid)||0,b=(s==null?void 0:s.amountRemaining)??Math.max(0,h-j),f=(s==null?void 0:s.clientsPaid)||0,w=(s==null?void 0:s.clientsRemaining)??Math.max(0,x-f),y=(s==null?void 0:s.todayPayments)||0;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[#1E1E1E]",children:t("chief.title")}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t("chief.subtitle")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:t("chief.label.chief")}),e.jsx("p",{className:"text-lg font-semibold text-[#1E1E1E]",children:v}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:t("chief.label.zone")}),e.jsx("p",{className:"text-lg font-semibold text-[#1E1E1E]",children:p}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:c,className:"text-[#D97706] hover:text-[#B45309] underline text-sm transition-colors",children:t("common.refresh")})})]})]}),d&&e.jsx("div",{className:"text-red-600",children:d}),u?e.jsx("div",{children:t("common.loading")}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-amber-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("chief.cards.clientsTotal")}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:x.toLocaleString()}),e.jsx("div",{className:"mt-2",children:e.jsx(a,{to:"/clients?scope=chief&filter=all",className:"text-[#D97706] hover:text-[#B45309] underline text-sm transition-colors",children:t("common.view")})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-amber-50 text-[#D97706]",children:e.jsx(D,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-amber-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("chief.cards.amountTotal")}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:h.toLocaleString()})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-amber-100 text-[#B45309]",children:e.jsx(k,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("chief.cards.amountPaid")}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:j.toLocaleString()}),e.jsx("div",{className:"mt-2",children:e.jsx(a,{to:"/clients?scope=chief&filter=paid",className:"text-[#15803D] hover:text-[#166534] underline text-sm transition-colors",children:t("common.view")})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-green-50 text-[#15803D]",children:e.jsx(L,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("chief.cards.amountRemaining")}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:b.toLocaleString()})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-amber-50 text-[#D97706]",children:e.jsx(P,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("chief.cards.clientsPaid")}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:f.toLocaleString()}),e.jsx("div",{className:"mt-2",children:e.jsx(a,{to:"/clients?scope=chief&filter=paid",className:"text-[#15803D] hover:text-[#166534] underline text-sm transition-colors",children:t("common.view")})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-green-50 text-[#15803D]",children:e.jsx(S,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-amber-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("chief.cards.clientsRemaining")}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:w.toLocaleString()}),e.jsx("div",{className:"mt-2",children:e.jsx(a,{to:"/clients?scope=chief&filter=remaining",className:"text-[#D97706] hover:text-[#B45309] underline text-sm transition-colors",children:t("common.view")})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-amber-50 text-[#D97706]",children:e.jsx(B,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("chief.cards.todayPayments")}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:y.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t("chief.cards.todayPaymentsDesc")}),e.jsx("div",{className:"mt-2",children:e.jsx(a,{to:"/payments?scope=chief&filter=today",className:"text-[#15803D] hover:text-[#166534] underline text-sm transition-colors",children:t("common.view")})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-green-50 text-[#15803D]",children:e.jsx(C,{className:"h-8 w-8"})})]})})]})]})};export{F as default};
