import{j as e}from"./index-DMsqYpTw.js";import{j as Be,f as Fe,r as a}from"./react-BeLGUnOF.js";const F="http://localhost:4000",r={primary:"#D97706",primaryHover:"#B45309",accent:"#15803D",background:"#F8FAFC",cardBg:"#FFFFFF",border:"#E2E8F0",borderLight:"#F1F5F9",text:"#0F172A",textLight:"#64748B",textLighter:"#94A3B8",error:"#DC2626",errorLight:"#FEF2F2"},d={Back:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Calendar:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Vehicle:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),Driver:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Time:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Manpower:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Delete:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Add:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Search:t=>e.jsx("svg",{...t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},xe=({title:t,number:m,subtitle:x})=>e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl text-white font-bold text-lg shadow-lg",style:{backgroundColor:r.primary},children:m}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold",style:{color:r.text},children:t}),x&&e.jsx("p",{className:"text-sm mt-1",style:{color:r.textLight},children:x})]})]}),e.jsx("div",{className:"h-px w-full",style:{backgroundColor:r.borderLight}})]}),U=({children:t,className:m="",padding:x="p-6"})=>e.jsx("div",{className:`rounded-2xl shadow-sm border transition-all duration-300 hover:shadow-md ${x} ${m}`,style:{backgroundColor:r.cardBg,borderColor:r.border},children:t}),he=({children:t,onClick:m,disabled:x=!1,loading:y=!1,size:S="md",className:L=""})=>{const u={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return e.jsxs("button",{onClick:m,disabled:x||y,className:`rounded-xl font-semibold text-white transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl active:scale-95 ${u[S]} ${L}`,style:{backgroundColor:x?r.textLighter:r.primary,cursor:x?"not-allowed":"pointer",opacity:x?.6:1},onMouseOver:v=>{!x&&!y&&(v.currentTarget.style.backgroundColor=r.primaryHover)},onMouseOut:v=>{!x&&!y&&(v.currentTarget.style.backgroundColor=r.primary)},children:[y&&e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),t]})},ue=({label:t,active:m,onClick:x})=>e.jsx("button",{onClick:x,className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 border ${m?"text-white shadow-md":"hover:shadow-sm"}`,style:m?{backgroundColor:r.primary,borderColor:r.primary}:{backgroundColor:r.cardBg,color:r.textLight,borderColor:r.border},children:t});function Te(){var ne,ie;const{id:t}=Be(),m=Number(t),x=Fe(),[y,S]=a.useState(!0),[L,u]=a.useState(null),[v,pe]=a.useState([]),[$,ve]=a.useState([]),[be,ye]=a.useState(""),[Z,fe]=a.useState(new Map),[je,Ne]=a.useState(new Map),[_,we]=a.useState(new Map),[q,ke]=a.useState(new Map),[f,E]=a.useState([]),[T,Ce]=a.useState([]),[g,M]=a.useState("saved"),[G,K]=a.useState(""),[Q,X]=a.useState(""),[h,ee]=a.useState(""),[D,A]=a.useState(""),[re,Se]=a.useState("08:00"),[se,Le]=a.useState("17:00"),[w,V]=a.useState([]),[B,le]=a.useState(!1),[j,_e]=a.useState(""),[k,oe]=a.useState("all"),[I]=a.useState("all"),p=typeof window<"u"?localStorage.getItem("token"):null,W=s=>`${s.first_name?s.first_name:""} ${s.last_name?s.last_name:""}`.trim()||s.full_name||s.username;a.useEffect(()=>{Number.isFinite(m)&&p&&(S(!0),u(null),Promise.all([fetch(`${F}/api/supervisor/zones/${m}/supervision`,{headers:{Authorization:`Bearer ${p}`}}),fetch(`${F}/api/supervisor/zones/${m}/schedule`,{headers:{Authorization:`Bearer ${p}`}})]).then(async([s,o])=>{var me;const l=await s.json(),i=await o.json();if(!s.ok)throw new Error((l==null?void 0:l.error)||"Failed to load zone data");if(!o.ok)throw new Error((i==null?void 0:i.error)||"Failed to load schedule");ye(((me=l==null?void 0:l.zone)==null?void 0:me.name)||""),pe(((l==null?void 0:l.vehicles)||[]).map(n=>({id:Number(n.id),plate:String(n.plate)}))),ve(((l==null?void 0:l.drivers)||[]).map(n=>({id:Number(n.id),username:String(n.username),first_name:n.first_name??null,last_name:n.last_name??null,full_name:n.full_name??null,vehicle_id:n.vehicle_id??null})));const b=new Map;((l==null?void 0:l.manpower)||[]).forEach(n=>{b.set(Number(n.id),W(n))}),ke(b);const C=new Map,ce=new Map;((l==null?void 0:l.vehicles)||[]).forEach(n=>{const c=((l==null?void 0:l.drivers)||[]).find(Y=>Number(Y.vehicle_id)===Number(n.id));C.set(Number(n.id),c?Number(c.id):null);const R=`${c!=null&&c.first_name?c.first_name:""} ${c!=null&&c.last_name?c.last_name:""}`.trim();ce.set(Number(n.id),R||(c==null?void 0:c.full_name)||(c==null?void 0:c.username)||"None assigned")}),fe(C),Ne(ce);const de=new Map;((l==null?void 0:l.vehicles)||[]).forEach(n=>{const c=Array.isArray(n.assigned_manpower_users)?n.assigned_manpower_users:[],R=c.map(J=>Number(J.id)),Y=c.map(J=>W(J));de.set(Number(n.id),{ids:R,names:Y})}),we(de),E((i==null?void 0:i.schedule)||[]);const P=Array.isArray(l==null?void 0:l.serviceDays)?l.serviceDays.map(n=>Number(n)).filter(n=>Number.isFinite(n)):[];Ce(P),P.length?(M("saved"),K(String(P[0]))):(M("special"),X("1"))}).catch(s=>u((s==null?void 0:s.message)||"Failed to load")).finally(()=>S(!1)))},[m,p]);async function Me(){if(!p)return;u(null);const s=g==="saved"?G:Q;if(!s||!h){u("Please select service day and vehicle");return}const o={service_day:Number(s),vehicle_id:Number(h),driver_id:D?Number(D):null,service_start:ge(re),service_end:ge(se),assigned_manpower_ids:w},l=await fetch(`${F}/api/supervisor/zones/${m}/schedule`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify(o)}),i=await l.json();if(!l.ok){u((i==null?void 0:i.error)||"Failed to create entry");return}E(b=>[...b,i.entry]),ee(""),A(""),V([])}async function De(s){if(!p)return;const o=await fetch(`${F}/api/supervisor/zones/${m}/schedule/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${p}`}});if(!o.ok){const l=await o.json().catch(()=>({}));u((l==null?void 0:l.error)||"Failed to delete entry");return}E(l=>l.filter(i=>i.id!==s))}const N=s=>new Date(2e3,0,s).toLocaleString(void 0,{weekday:"long"}),te=[1,2,3,4,5,6,7],ae=te.filter(s=>!T.includes(s)),O=a.useMemo(()=>{const s=new Map;return v.forEach(o=>s.set(o.id,o.plate)),s},[v]),z=a.useMemo(()=>{const s=new Map;return $.forEach(o=>s.set(o.id,o.full_name||o.username)),s},[$]);a.useEffect(()=>{const s=Number(h);if(!s)return;const o=Z.get(s)??null;A(o?String(o):"");const l=_.get(s)||{ids:[]};V(l.ids)},[h,Z,_]);const H=a.useMemo(()=>f.filter(s=>{var b,C;const o=j===""||N(s.service_day).toLowerCase().includes(j.toLowerCase())||((b=O.get(s.vehicle_id))==null?void 0:b.toLowerCase().includes(j.toLowerCase()))||s.driver_id&&((C=z.get(s.driver_id))==null?void 0:C.toLowerCase().includes(j.toLowerCase())),l=k==="all"||s.service_day===k,i=I==="all"||s.vehicle_id===I;return o&&l&&i}).sort((s,o)=>s.service_day-o.service_day||s.service_start.localeCompare(o.service_start)),[f,j,k,I,O,z]);return y?e.jsx("div",{className:"min-h-screen p-4 lg:p-6",style:{backgroundColor:r.background},children:e.jsx("div",{className:"max-w-7xl mx-auto space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 rounded-2xl w-64 mb-6",style:{backgroundColor:r.border}}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"h-64 rounded-2xl",style:{backgroundColor:r.border}}),e.jsx("div",{className:"h-96 rounded-2xl",style:{backgroundColor:r.border}})]})]})})}):e.jsx("div",{className:"min-h-screen p-4 lg:p-6",style:{backgroundColor:r.background},children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>x(-1),className:"flex items-center space-x-2 transition-all duration-300 hover:scale-105 active:scale-95 p-3 rounded-2xl",style:{backgroundColor:r.cardBg,color:r.textLight},children:[e.jsx(d.Back,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Back"})]}),e.jsx("div",{className:"w-px h-8",style:{backgroundColor:r.border}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",style:{color:r.text},children:"Service Schedule"}),e.jsxs("p",{className:"text-lg mt-2",style:{color:r.textLight},children:["Managing services for ",e.jsx("span",{style:{color:r.primary,fontWeight:"600"},children:be})]})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:r.primary},children:f.length}),e.jsx("div",{className:"text-sm",style:{color:r.textLight},children:"Total Services"})]})})]}),L&&e.jsx("div",{className:"rounded-2xl p-4 border animate-fadeIn",style:{backgroundColor:r.errorLight,borderColor:r.error},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:r.error}}),e.jsx("span",{className:"font-semibold",style:{color:r.error},children:L})]})}),e.jsxs("section",{children:[e.jsx(xe,{title:"Schedule New Service",number:1,subtitle:"Plan and organize service entries for your zone"}),e.jsxs(U,{padding:"p-6 lg:p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-lg font-semibold mb-4 flex items-center gap-2",style:{color:r.text},children:[e.jsx(d.Calendar,{className:"w-5 h-5",style:{color:r.primary}}),"Service Day Selection"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>M("saved"),className:`flex-1 min-w-[140px] p-4 rounded-xl border-2 text-center transition-all duration-300 ${g==="saved"?"border-white shadow-lg scale-105":"border-transparent hover:border-gray-200"}`,style:g==="saved"?{backgroundColor:r.primary,color:"white"}:{backgroundColor:r.background,color:r.text},children:[e.jsx("div",{className:"font-semibold",children:"Regular Days"}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:"Saved Schedule"})]}),e.jsxs("button",{onClick:()=>M("special"),className:`flex-1 min-w-[140px] p-4 rounded-xl border-2 text-center transition-all duration-300 ${g==="special"?"border-white shadow-lg scale-105":"border-transparent hover:border-gray-200"}`,style:g==="special"?{backgroundColor:r.accent,color:"white"}:{backgroundColor:r.background,color:r.text},children:[e.jsx("div",{className:"font-semibold",children:"Special Days"}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:"One-time Events"})]})]}),e.jsx("select",{value:g==="saved"?G:Q,onChange:s=>g==="saved"?K(s.target.value):X(s.target.value),className:"w-full rounded-xl px-4 py-4 text-lg focus:outline-none focus:ring-4 border transition-all duration-300",onFocus:s=>{s.currentTarget.style.borderColor=r.primary,s.currentTarget.style.boxShadow=`0 0 0 4px ${r.primary}33`},onBlur:s=>{s.currentTarget.style.borderColor=r.border,s.currentTarget.style.boxShadow="none"},style:{backgroundColor:r.cardBg,borderColor:r.border,color:r.text},children:g==="saved"?e.jsxs(e.Fragment,{children:[!T.length&&e.jsx("option",{value:"",children:"No regular days configured"}),T.map(s=>e.jsx("option",{value:s,children:N(s)},s))]}):e.jsx(e.Fragment,{children:ae.length?ae.map(s=>e.jsx("option",{value:s,children:N(s)},s)):te.map(s=>e.jsx("option",{value:s,children:N(s)},s))})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 flex items-center gap-2",style:{color:r.text},children:[e.jsx(d.Time,{className:"w-4 h-4",style:{color:r.primary}}),"Start Time"]}),e.jsx("input",{type:"time",value:re,onChange:s=>Se(s.target.value),className:"w-full rounded-xl px-4 py-3 text-lg focus:outline-none focus:ring-4 border transition-all duration-300",style:{backgroundColor:r.cardBg,borderColor:r.border,color:r.text}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 flex items-center gap-2",style:{color:r.text},children:[e.jsx(d.Time,{className:"w-4 h-4",style:{color:r.primary}}),"End Time"]}),e.jsx("input",{type:"time",value:se,onChange:s=>Le(s.target.value),className:"w-full rounded-xl px-4 py-3 text-lg focus:outline-none focus:ring-4 border transition-all duration-300",style:{backgroundColor:r.cardBg,borderColor:r.border,color:r.text}})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 flex items-center gap-2",style:{color:r.text},children:[e.jsx(d.Vehicle,{className:"w-4 h-4",style:{color:r.primary}}),"Select Vehicle"]}),e.jsxs("select",{value:h,onChange:s=>ee(s.target.value),className:"w-full rounded-xl px-4 py-3 text-lg focus:outline-none focus:ring-4 border transition-all duration-300",style:{backgroundColor:r.cardBg,borderColor:r.border,color:r.text},children:[e.jsx("option",{value:"",children:"Choose a vehicle..."}),v.map(s=>e.jsxs("option",{value:s.id,children:[s.plate," - Vehicle"]},s.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 flex items-center gap-2",style:{color:r.text},children:[e.jsx(d.Driver,{className:"w-4 h-4",style:{color:r.primary}}),"Assigned Driver"]}),h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full rounded-xl px-4 py-3 text-lg border",style:{backgroundColor:r.background,borderColor:r.border,color:r.text},children:je.get(Number(h))||"None assigned"}),e.jsxs("div",{className:"mt-2 rounded-xl p-3 text-sm border",style:{backgroundColor:r.background,borderColor:r.border,color:r.textLight},children:["You can temporarily change the driver for this service day without affecting permanent assignments.",e.jsx("button",{type:"button",onClick:()=>le(s=>!s),className:"ml-2 inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold shadow-sm",style:{backgroundColor:r.primary,color:"white"},children:B?"Close":"Change"})]}),B&&e.jsx("div",{className:"mt-3",children:e.jsxs("select",{value:D,onChange:s=>A(s.target.value),className:"w-full rounded-xl px-4 py-3 text-base focus:outline-none focus:ring-4 border transition-all duration-300",style:{backgroundColor:r.cardBg,borderColor:r.border,color:r.text},children:[e.jsx("option",{value:"",children:"Use default assigned driver"}),$.map(s=>e.jsx("option",{value:s.id,children:W(s)},s.id))]})})]}):e.jsx("div",{className:"p-4 rounded-xl border text-sm",style:{backgroundColor:r.background,borderColor:r.border,color:r.textLight},children:"Choose a vehicle to see its assigned driver."})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-4 flex items-center gap-2",style:{color:r.text},children:[e.jsx(d.Manpower,{className:"w-4 h-4",style:{color:r.primary}}),h?"Assigned Manpower Team":"Assign Manpower Team",w.length>0&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full ml-2",style:{backgroundColor:r.primary,color:"white"},children:[w.length," selected"]})]}),h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 p-2 rounded-xl",style:{backgroundColor:r.background},children:(((ne=_.get(Number(h)))==null?void 0:ne.names)||[]).length?(((ie=_.get(Number(h)))==null?void 0:ie.names)||[]).map((s,o)=>e.jsx("span",{className:"px-3 py-2 rounded-xl text-sm border",style:{backgroundColor:r.cardBg,borderColor:r.border,color:r.text},children:s},o)):e.jsx("span",{className:"italic",style:{color:r.textLight},children:"None assigned"})}),e.jsxs("div",{className:"mt-2 rounded-xl p-3 text-sm border",style:{backgroundColor:r.background,borderColor:r.border,color:r.textLight},children:["You can temporarily add or remove manpower for this service day without affecting permanent assignments.",e.jsx("button",{type:"button",onClick:()=>le(s=>!s),className:"ml-2 inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold shadow-sm",style:{backgroundColor:r.primary,color:"white"},children:B?"Close":"Change"})]}),B&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:r.textLight},children:"Select manpower for this service"}),e.jsx("select",{multiple:!0,value:w.map(String),onChange:s=>{const o=Array.from(s.target.selectedOptions).map(l=>Number(l.value));V(o)},className:"w-full rounded-xl px-3 py-3 text-base focus:outline-none focus:ring-4 border transition-all duration-300 min-h-[140px]",style:{backgroundColor:r.cardBg,borderColor:r.border,color:r.text},children:Array.from(q.entries()).map(([s,o])=>e.jsx("option",{value:s,children:o},s))})]})]}):e.jsx("div",{className:"p-4 rounded-xl border text-sm",style:{backgroundColor:r.background,borderColor:r.border,color:r.textLight},children:"Choose a vehicle to work on the selected service day. The assigned driver and manpowers for that vehicle will be used."})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-4 mt-8 pt-6 border-t",style:{borderColor:r.borderLight},children:[e.jsxs("div",{className:"text-sm",style:{color:r.textLight},children:[w.length," manpower • ",h?"Vehicle selected":"No vehicle"," • ",D?"Driver (auto)":"No driver"]}),e.jsxs(he,{onClick:Me,size:"lg",className:"w-full sm:w-auto",children:[e.jsx(d.Add,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Service Entry"})]})]})]})]}),e.jsxs("section",{children:[e.jsx(xe,{title:"Scheduled Services",number:2,subtitle:"Manage and monitor all scheduled services"}),e.jsx(U,{padding:"p-4 lg:p-6",className:"mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:e.jsxs("div",{className:"relative flex-1 lg:flex-initial",children:[e.jsx(d.Search,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:r.textLight}}),e.jsx("input",{type:"text",placeholder:"Search services...",value:j,onChange:s=>_e(s.target.value),className:"w-full lg:w-64 pl-10 pr-4 py-3 rounded-xl border focus:outline-none focus:ring-2 transition-all duration-300",style:{backgroundColor:r.cardBg,borderColor:r.border,color:r.text}})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 w-full lg:w-auto",children:[e.jsx(ue,{label:"All Days",active:k==="all",onClick:()=>oe("all")}),[...new Set(f.map(s=>s.service_day))].sort().map(s=>e.jsx(ue,{label:N(s),active:k===s,onClick:()=>oe(s)},s))]}),e.jsxs("div",{className:"text-sm font-semibold px-3 py-2 rounded-xl",style:{backgroundColor:r.primary,color:"white"},children:[H.length," of ",f.length]})]})}),e.jsx(U,{padding:"p-6 lg:p-8",children:f.length?H.length?e.jsx("div",{className:"grid gap-4",children:H.map(s=>{var o,l;return e.jsx("div",{className:"rounded-2xl border p-5 lg:p-6 transition-all duration-300 hover:shadow-lg hover:scale-[1.02] group",style:{backgroundColor:r.cardBg,borderColor:r.borderLight},children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:r.primary}}),e.jsx("span",{className:"text-xl font-bold",style:{color:r.text},children:N(s.service_day)})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl",style:{backgroundColor:r.background},children:[e.jsx(d.Time,{className:"w-4 h-4 flex-shrink-0",style:{color:r.primary}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",style:{color:r.textLight},children:"Service Start Time"}),e.jsx("div",{className:"font-semibold",style:{color:r.text},children:s.service_start.substring(0,5)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl",style:{backgroundColor:r.background},children:[e.jsx(d.Time,{className:"w-4 h-4 flex-shrink-0",style:{color:r.primary}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",style:{color:r.textLight},children:"Service End Time"}),e.jsx("div",{className:"font-semibold",style:{color:r.text},children:s.service_end.substring(0,5)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-base",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{backgroundColor:r.background},children:[e.jsx(d.Vehicle,{className:"w-5 h-5 flex-shrink-0",style:{color:r.primary}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",style:{color:r.text},children:O.get(s.vehicle_id)||`Vehicle #${s.vehicle_id}`}),e.jsx("div",{className:"text-sm",style:{color:r.textLight},children:"Vehicle"})]})]}),s.driver_id&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{backgroundColor:r.background},children:[e.jsx(d.Driver,{className:"w-5 h-5 flex-shrink-0",style:{color:r.primary}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",style:{color:r.text},children:z.get(s.driver_id)||`Driver #${s.driver_id}`}),e.jsx("div",{className:"text-sm",style:{color:r.textLight},children:"Driver"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl",style:{backgroundColor:r.background},children:[e.jsx(d.Manpower,{className:"w-5 h-5 flex-shrink-0 mt-1",style:{color:r.primary}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-semibold mb-1",style:{color:r.text},children:(o=s.assigned_manpower_ids)!=null&&o.length?"Manpower":"No team assigned"}),(l=s.assigned_manpower_ids)!=null&&l.length?e.jsx("div",{className:"flex flex-wrap gap-2",children:s.assigned_manpower_ids.map(i=>e.jsx("span",{className:"px-2 py-1 rounded-lg text-sm border",style:{backgroundColor:r.cardBg,borderColor:r.border,color:r.text},children:q.get(i)||`#${i}`},i))}):e.jsx("div",{className:"text-sm",style:{color:r.textLight},children:"Manpower"})]})]})]})]}),e.jsxs("button",{onClick:()=>De(s.id),className:"flex items-center gap-2 px-4 py-3 rounded-xl font-semibold transition-all duration-300 hover:scale-105 active:scale-95 group-hover:op-100 lg:opacity-70",style:{backgroundColor:r.errorLight,color:r.error},children:[e.jsx(d.Delete,{className:"w-4 h-4"}),e.jsx("span",{children:"Remove"})]})]})},s.id)})}):e.jsxs("div",{className:"text-center py-12 rounded-2xl",style:{backgroundColor:r.background},children:[e.jsx(d.Search,{className:"w-16 h-16 mx-auto mb-4",style:{color:r.textLighter}}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:r.textLight},children:"No matching services"}),e.jsx("p",{style:{color:r.textLighter},children:"Try adjusting your search or filters"})]}):e.jsxs("div",{className:"text-center py-12 lg:py-16 rounded-2xl border-2 border-dashed",style:{backgroundColor:r.background,borderColor:r.border},children:[e.jsx(d.Calendar,{className:"w-16 h-16 mx-auto mb-4",style:{color:r.textLighter}}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:r.textLight},children:"No services scheduled yet"}),e.jsx("p",{className:"text-lg mb-6",style:{color:r.textLighter},children:"Create your first service entry to get started"}),e.jsxs(he,{onClick:()=>{var s;return(s=document.getElementById("schedule-form"))==null?void 0:s.scrollIntoView({behavior:"smooth"})},size:"md",children:[e.jsx(d.Add,{className:"w-5 h-5"}),e.jsx("span",{children:"Schedule First Service"})]})]})})]})]})})}function ge(t){return/^\d{2}:\d{2}$/.test(t)?`${t}:00`:t}export{Te as default};
