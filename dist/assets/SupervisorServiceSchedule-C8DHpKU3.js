import{u as Ee,j as e}from"./index-DnGg16Vn.js";import{j as Ae,f as Ve,r as a}from"./react-BeLGUnOF.js";const B="http://localhost:4000",s={primary:"#D97706",primaryHover:"#B45309",accent:"#15803D",background:"#F8FAFC",cardBg:"#FFFFFF",border:"#E2E8F0",borderLight:"#F1F5F9",text:"#0F172A",textLight:"#64748B",textLighter:"#94A3B8",error:"#DC2626",errorLight:"#FEF2F2"},d={Back:l=>e.jsx("svg",{...l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Calendar:l=>e.jsx("svg",{...l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Vehicle:l=>e.jsx("svg",{...l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),Driver:l=>e.jsx("svg",{...l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Time:l=>e.jsx("svg",{...l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Manpower:l=>e.jsx("svg",{...l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Delete:l=>e.jsx("svg",{...l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Add:l=>e.jsx("svg",{...l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Search:l=>e.jsx("svg",{...l,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},pe=({title:l,number:h,subtitle:u})=>e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl text-white font-bold text-lg shadow-lg",style:{backgroundColor:s.primary},children:h}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold",style:{color:s.text},children:l}),u&&e.jsx("p",{className:"text-sm mt-1",style:{color:s.textLight},children:u})]})]}),e.jsx("div",{className:"h-px w-full",style:{backgroundColor:s.borderLight}})]}),G=({children:l,className:h="",padding:u="p-6"})=>e.jsx("div",{className:`rounded-2xl shadow-sm border transition-all duration-300 hover:shadow-md ${u} ${h}`,style:{backgroundColor:s.cardBg,borderColor:s.border},children:l}),ge=({children:l,onClick:h,disabled:u=!1,loading:v=!1,size:x="md",className:F=""})=>{const $={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return e.jsxs("button",{onClick:h,disabled:u||v,className:`rounded-xl font-semibold text-white transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl active:scale-95 ${$[x]} ${F}`,style:{backgroundColor:u?s.textLighter:s.primary,cursor:u?"not-allowed":"pointer",opacity:u?.6:1},onMouseOver:y=>{!u&&!v&&(y.currentTarget.style.backgroundColor=s.primaryHover)},onMouseOut:y=>{!u&&!v&&(y.currentTarget.style.backgroundColor=s.primary)},children:[v&&e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),l]})},be=({label:l,active:h,onClick:u})=>e.jsx("button",{onClick:u,className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 border ${h?"text-white shadow-md":"hover:shadow-sm"}`,style:h?{backgroundColor:s.primary,borderColor:s.primary}:{backgroundColor:s.cardBg,color:s.textLight,borderColor:s.border},children:l});function He(){var de,ue;const{t:l,lang:h,setLang:u}=Ee(),{id:v}=Ae(),x=Number(v),F=Ve(),[$,y]=a.useState(!0),[Q,j]=a.useState(null),[T,ye]=a.useState([]),[E,je]=a.useState([]),[fe,Ne]=a.useState(""),[U,we]=a.useState(new Map),[ke,Se]=a.useState(new Map),[L,Ce]=a.useState(new Map),[X,Le]=a.useState(new Map),[f,A]=a.useState([]),[V,_e]=a.useState([]),[p,_]=a.useState("saved"),[Y,ee]=a.useState(""),[se,re]=a.useState(""),[m,le]=a.useState(""),[M,I]=a.useState(""),[te,Me]=a.useState("08:00"),[oe,De]=a.useState("17:00"),[k,W]=a.useState([]),[D,ae]=a.useState(!1),[N,Be]=a.useState(""),[S,ne]=a.useState("all"),[H]=a.useState("all"),g=typeof window<"u"?localStorage.getItem("token"):null,O=r=>`${r.first_name?r.first_name:""} ${r.last_name?r.last_name:""}`.trim()||r.full_name||r.username;a.useEffect(()=>{Number.isFinite(x)&&g&&(y(!0),j(null),Promise.all([fetch(`${B}/api/supervisor/zones/${x}/supervision`,{headers:{Authorization:`Bearer ${g}`}}),fetch(`${B}/api/supervisor/zones/${x}/schedule`,{headers:{Authorization:`Bearer ${g}`}})]).then(async([r,o])=>{var xe;const t=await r.json(),c=await o.json();if(!r.ok)throw new Error((t==null?void 0:t.error)||"Failed to load zone data");if(!o.ok)throw new Error((c==null?void 0:c.error)||"Failed to load schedule");Ne(((xe=t==null?void 0:t.zone)==null?void 0:xe.name)||""),ye(((t==null?void 0:t.vehicles)||[]).map(n=>({id:Number(n.id),plate:String(n.plate)}))),je(((t==null?void 0:t.drivers)||[]).map(n=>({id:Number(n.id),username:String(n.username),first_name:n.first_name??null,last_name:n.last_name??null,full_name:n.full_name??null,vehicle_id:n.vehicle_id??null})));const b=new Map;((t==null?void 0:t.manpower)||[]).forEach(n=>{b.set(Number(n.id),O(n))}),Le(b);const C=new Map,me=new Map;((t==null?void 0:t.vehicles)||[]).forEach(n=>{const i=((t==null?void 0:t.drivers)||[]).find(Z=>Number(Z.vehicle_id)===Number(n.id));C.set(Number(n.id),i?Number(i.id):null);const K=`${i!=null&&i.first_name?i.first_name:""} ${i!=null&&i.last_name?i.last_name:""}`.trim();me.set(Number(n.id),K||(i==null?void 0:i.full_name)||(i==null?void 0:i.username)||"None assigned")}),we(C),Se(me);const he=new Map;((t==null?void 0:t.vehicles)||[]).forEach(n=>{const i=Array.isArray(n.assigned_manpower_users)?n.assigned_manpower_users:[],K=i.map(q=>Number(q.id)),Z=i.map(q=>O(q));he.set(Number(n.id),{ids:K,names:Z})}),Ce(he),A((c==null?void 0:c.schedule)||[]);const J=Array.isArray(t==null?void 0:t.serviceDays)?t.serviceDays.map(n=>Number(n)).filter(n=>Number.isFinite(n)):[];_e(J),J.length?(_("saved"),ee(String(J[0]))):(_("special"),re("1"))}).catch(r=>j((r==null?void 0:r.message)||"Failed to load")).finally(()=>y(!1)))},[x,g]);async function Fe(){if(!g)return;j(null);const r=p==="saved"?Y:se;if(!r||!m){j("Please select service day and vehicle");return}const o={service_day:Number(r),vehicle_id:Number(m),driver_id:M?Number(M):null,service_start:ve(te),service_end:ve(oe),assigned_manpower_ids:k},t=await fetch(`${B}/api/supervisor/zones/${x}/schedule`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(o)}),c=await t.json();if(!t.ok){j((c==null?void 0:c.error)||"Failed to create entry");return}A(b=>[...b,c.entry]),le(""),I(""),W([])}async function $e(r){if(!g)return;const o=await fetch(`${B}/api/supervisor/zones/${x}/schedule/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${g}`}});if(!o.ok){const t=await o.json().catch(()=>({}));j((t==null?void 0:t.error)||"Failed to delete entry");return}A(t=>t.filter(c=>c.id!==r))}function Te(r){switch(r){case 1:return"weekday.mon";case 2:return"weekday.tue";case 3:return"weekday.wed";case 4:return"weekday.thu";case 5:return"weekday.fri";case 6:return"weekday.sat";case 7:return"weekday.sun";default:return"weekday.mon"}}const w=r=>l(Te(r)),ce=[1,2,3,4,5,6,7],ie=ce.filter(r=>!V.includes(r)),P=a.useMemo(()=>{const r=new Map;return T.forEach(o=>r.set(o.id,o.plate)),r},[T]),z=a.useMemo(()=>{const r=new Map;return E.forEach(o=>r.set(o.id,o.full_name||o.username)),r},[E]);a.useEffect(()=>{const r=Number(m);if(!r)return;const o=U.get(r)??null;I(o?String(o):"");const t=L.get(r)||{ids:[]};W(t.ids)},[m,U,L]);const R=a.useMemo(()=>f.filter(r=>{var b,C;const o=N===""||w(r.service_day).toLowerCase().includes(N.toLowerCase())||((b=P.get(r.vehicle_id))==null?void 0:b.toLowerCase().includes(N.toLowerCase()))||r.driver_id&&((C=z.get(r.driver_id))==null?void 0:C.toLowerCase().includes(N.toLowerCase())),t=S==="all"||r.service_day===S,c=H==="all"||r.vehicle_id===H;return o&&t&&c}).sort((r,o)=>r.service_day-o.service_day||r.service_start.localeCompare(o.service_start)),[f,N,S,H,P,z]);return $?e.jsx("div",{className:"min-h-screen p-4 lg:p-6",style:{backgroundColor:s.background},children:e.jsx("div",{className:"max-w-7xl mx-auto space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 rounded-2xl w-64 mb-6",style:{backgroundColor:s.border}}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"h-64 rounded-2xl",style:{backgroundColor:s.border}}),e.jsx("div",{className:"h-96 rounded-2xl",style:{backgroundColor:s.border}})]})]})})}):e.jsx("div",{className:"min-h-screen p-4 lg:p-6",style:{backgroundColor:s.background},children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>F(-1),className:"flex items-center space-x-2 transition-all duration-300 hover:scale-105 active:scale-95 p-3 rounded-2xl",style:{backgroundColor:s.cardBg,color:s.textLight},children:[e.jsx(d.Back,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:l("supSched.back")})]}),e.jsx("div",{className:"w-px h-8",style:{backgroundColor:s.border}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",style:{color:s.text},children:l("supSched.title")}),e.jsx("p",{className:"text-lg mt-2",style:{color:s.textLight},children:l("supSched.subtitle",{zone:fe})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:s.primary},children:f.length}),e.jsx("div",{className:"text-sm",style:{color:s.textLight},children:l("supSched.totalServices")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm",style:{color:s.textLight},children:l("common.language")}),e.jsxs("select",{value:h,onChange:r=>u(r.target.value),className:"rounded-xl px-3 py-2 border text-sm",style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text},children:[e.jsx("option",{value:"en",children:l("lang.english")}),e.jsx("option",{value:"rw",children:l("lang.kinyarwanda")})]})]})]})]}),Q&&e.jsx("div",{className:"rounded-2xl p-4 border animate-fadeIn",style:{backgroundColor:s.errorLight,borderColor:s.error},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:s.error}}),e.jsx("span",{className:"font-semibold",style:{color:s.error},children:Q})]})}),e.jsxs("section",{children:[e.jsx(pe,{title:l("supSched.section.addNew"),number:1,subtitle:l("supSched.section.addNewSub")}),e.jsxs(G,{padding:"p-6 lg:p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-lg font-semibold mb-4 flex items-center gap-2",style:{color:s.text},children:[e.jsx(d.Calendar,{className:"w-5 h-5",style:{color:s.primary}}),l("supSched.daySelection")]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>_("saved"),className:`flex-1 min-w-[140px] p-4 rounded-xl border-2 text-center transition-all duration-300 ${p==="saved"?"border-white shadow-lg scale-105":"border-transparent hover:border-gray-200"}`,style:p==="saved"?{backgroundColor:s.primary,color:"white"}:{backgroundColor:s.background,color:s.text},children:[e.jsx("div",{className:"font-semibold",children:l("supSched.regularDays")}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:l("supSched.savedSchedule")})]}),e.jsxs("button",{onClick:()=>_("special"),className:`flex-1 min-w-[140px] p-4 rounded-xl border-2 text-center transition-all duration-300 ${p==="special"?"border-white shadow-lg scale-105":"border-transparent hover:border-gray-200"}`,style:p==="special"?{backgroundColor:s.accent,color:"white"}:{backgroundColor:s.background,color:s.text},children:[e.jsx("div",{className:"font-semibold",children:l("supSched.specialDays")}),e.jsx("div",{className:"text-sm opacity-90 mt-1",children:l("supSched.oneTimeEvents")})]})]}),e.jsx("select",{value:p==="saved"?Y:se,onChange:r=>p==="saved"?ee(r.target.value):re(r.target.value),className:"w-full rounded-xl px-4 py-4 text-lg focus:outline-none focus:ring-4 border transition-all duration-300",onFocus:r=>{r.currentTarget.style.borderColor=s.primary,r.currentTarget.style.boxShadow=`0 0 0 4px ${s.primary}33`},onBlur:r=>{r.currentTarget.style.borderColor=s.border,r.currentTarget.style.boxShadow="none"},style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text},children:p==="saved"?e.jsxs(e.Fragment,{children:[!V.length&&e.jsx("option",{value:"",children:l("supSched.noRegularDays")}),V.map(r=>e.jsx("option",{value:r,children:w(r)},r))]}):e.jsx(e.Fragment,{children:ie.length?ie.map(r=>e.jsx("option",{value:r,children:w(r)},r)):ce.map(r=>e.jsx("option",{value:r,children:w(r)},r))})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 flex items-center gap-2",style:{color:s.text},children:[e.jsx(d.Time,{className:"w-4 h-4",style:{color:s.primary}}),l("supSched.startTime")]}),e.jsx("input",{type:"time",value:te,onChange:r=>Me(r.target.value),className:"w-full rounded-xl px-4 py-3 text-lg focus:outline-none focus:ring-4 border transition-all duration-300",style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 flex items-center gap-2",style:{color:s.text},children:[e.jsx(d.Time,{className:"w-4 h-4",style:{color:s.primary}}),l("supSched.endTime")]}),e.jsx("input",{type:"time",value:oe,onChange:r=>De(r.target.value),className:"w-full rounded-xl px-4 py-3 text-lg focus:outline-none focus:ring-4 border transition-all duration-300",style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text}})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 flex items-center gap-2",style:{color:s.text},children:[e.jsx(d.Vehicle,{className:"w-4 h-4",style:{color:s.primary}}),l("supSched.selectVehicle")]}),e.jsxs("select",{value:m,onChange:r=>le(r.target.value),className:"w-full rounded-xl px-4 py-3 text-lg focus:outline-none focus:ring-4 border transition-all duration-300",style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text},children:[e.jsx("option",{value:"",children:l("supSched.chooseVehicle")}),T.map(r=>e.jsxs("option",{value:r.id,children:[r.plate," - ",l("supSched.vehicleSuffix")]},r.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 flex items-center gap-2",style:{color:s.text},children:[e.jsx(d.Driver,{className:"w-4 h-4",style:{color:s.primary}}),l("supSched.assignedDriver")]}),m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full rounded-xl px-4 py-3 text-lg border",style:{backgroundColor:s.background,borderColor:s.border,color:s.text},children:ke.get(Number(m))||l("supSched.noneAssigned")}),e.jsxs("div",{className:"mt-2 rounded-xl p-3 text-sm border",style:{backgroundColor:s.background,borderColor:s.border,color:s.textLight},children:[l("supSched.tempChangeDriverInfo"),e.jsx("button",{type:"button",onClick:()=>ae(r=>!r),className:"ml-2 inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold shadow-sm",style:{backgroundColor:s.primary,color:"white"},children:l(D?"supSched.close":"supSched.change")})]}),D&&e.jsx("div",{className:"mt-3",children:e.jsxs("select",{value:M,onChange:r=>I(r.target.value),className:"w-full rounded-xl px-4 py-3 text-base focus:outline-none focus:ring-4 border transition-all duration-300",style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text},children:[e.jsx("option",{value:"",children:l("supSched.useDefaultDriver")}),E.map(r=>e.jsx("option",{value:r.id,children:O(r)},r.id))]})})]}):e.jsx("div",{className:"p-4 rounded-xl border text-sm",style:{backgroundColor:s.background,borderColor:s.border,color:s.textLight},children:l("supSched.chooseVehicleToSeeDriver")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-4 flex items-center gap-2",style:{color:s.text},children:[e.jsx(d.Manpower,{className:"w-4 h-4",style:{color:s.primary}}),l(m?"supSched.assignedManpowerTeam":"supSched.assignManpowerTeam"),k.length>0&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full ml-2",style:{backgroundColor:s.primary,color:"white"},children:l("supSched.selectedCount",{count:k.length})})]}),m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 p-2 rounded-xl",style:{backgroundColor:s.background},children:(((de=L.get(Number(m)))==null?void 0:de.names)||[]).length?(((ue=L.get(Number(m)))==null?void 0:ue.names)||[]).map((r,o)=>e.jsx("span",{className:"px-3 py-2 rounded-xl text-sm border",style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text},children:r},o)):e.jsx("span",{className:"italic",style:{color:s.textLight},children:l("supSched.noneAssigned")})}),e.jsxs("div",{className:"mt-2 rounded-xl p-3 text-sm border",style:{backgroundColor:s.background,borderColor:s.border,color:s.textLight},children:[l("supSched.tempChangeMpInfo"),e.jsx("button",{type:"button",onClick:()=>ae(r=>!r),className:"ml-2 inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold shadow-sm",style:{backgroundColor:s.primary,color:"white"},children:l(D?"supSched.close":"supSched.change")})]}),D&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs mb-2",style:{color:s.textLight},children:l("supSched.selectMpForService")}),e.jsx("select",{multiple:!0,value:k.map(String),onChange:r=>{const o=Array.from(r.target.selectedOptions).map(t=>Number(t.value));W(o)},className:"w-full rounded-xl px-3 py-3 text-base focus:outline-none focus:ring-4 border transition-all duration-300 min-h-[140px]",style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text},children:Array.from(X.entries()).map(([r,o])=>e.jsx("option",{value:r,children:o},r))})]})]}):e.jsx("div",{className:"p-4 rounded-xl border text-sm",style:{backgroundColor:s.background,borderColor:s.border,color:s.textLight},children:l("supSched.chooseVehicleToWork")})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-4 mt-8 pt-6 border-t",style:{borderColor:s.borderLight},children:[e.jsxs("div",{className:"text-sm",style:{color:s.textLight},children:[l("supSched.summary.manpower",{count:k.length})," • ",l(m?"supSched.summary.vehicleSelected":"supSched.summary.noVehicle")," • ",l(M?"supSched.summary.driverAuto":"supSched.summary.noDriver")]}),e.jsxs(ge,{onClick:Fe,size:"lg",className:"w-full sm:w-auto",children:[e.jsx(d.Add,{className:"w-5 h-5"}),e.jsx("span",{children:l("supSched.createEntry")})]})]})]})]}),e.jsxs("section",{children:[e.jsx(pe,{title:l("supSched.scheduledServices"),number:2,subtitle:l("supSched.scheduledServicesSub")}),e.jsx(G,{padding:"p-4 lg:p-6",className:"mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:e.jsxs("div",{className:"relative flex-1 lg:flex-initial",children:[e.jsx(d.Search,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:s.textLight}}),e.jsx("input",{type:"text",placeholder:l("supSched.searchPlaceholder"),value:N,onChange:r=>Be(r.target.value),className:"w-full lg:w-64 pl-10 pr-4 py-3 rounded-xl border focus:outline-none focus:ring-2 transition-all duration-300",style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text}})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 w-full lg:w-auto",children:[e.jsx(be,{label:l("supSched.allDays"),active:S==="all",onClick:()=>ne("all")}),[...new Set(f.map(r=>r.service_day))].sort().map(r=>e.jsx(be,{label:w(r),active:S===r,onClick:()=>ne(r)},r))]}),e.jsx("div",{className:"text-sm font-semibold px-3 py-2 rounded-xl",style:{backgroundColor:s.primary,color:"white"},children:l("supSched.filterCount",{filtered:R.length,total:f.length})})]})}),e.jsx(G,{padding:"p-6 lg:p-8",children:f.length?R.length?e.jsx("div",{className:"grid gap-4",children:R.map(r=>{var o,t;return e.jsx("div",{className:"rounded-2xl border p-5 lg:p-6 transition-all duration-300 hover:shadow-lg hover:scale-[1.02] group",style:{backgroundColor:s.cardBg,borderColor:s.borderLight},children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:s.primary}}),e.jsx("span",{className:"text-xl font-bold",style:{color:s.text},children:w(r.service_day)})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl",style:{backgroundColor:s.background},children:[e.jsx(d.Time,{className:"w-4 h-4 flex-shrink-0",style:{color:s.primary}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",style:{color:s.textLight},children:l("supSched.list.startTimeLabel")}),e.jsx("div",{className:"font-semibold",style:{color:s.text},children:r.service_start.substring(0,5)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl",style:{backgroundColor:s.background},children:[e.jsx(d.Time,{className:"w-4 h-4 flex-shrink-0",style:{color:s.primary}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",style:{color:s.textLight},children:l("supSched.list.endTimeLabel")}),e.jsx("div",{className:"font-semibold",style:{color:s.text},children:r.service_end.substring(0,5)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-base",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{backgroundColor:s.background},children:[e.jsx(d.Vehicle,{className:"w-5 h-5 flex-shrink-0",style:{color:s.primary}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",style:{color:s.text},children:P.get(r.vehicle_id)||`Vehicle #${r.vehicle_id}`}),e.jsx("div",{className:"text-sm",style:{color:s.textLight},children:l("supSched.vehicle")})]})]}),r.driver_id&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{backgroundColor:s.background},children:[e.jsx(d.Driver,{className:"w-5 h-5 flex-shrink-0",style:{color:s.primary}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",style:{color:s.text},children:z.get(r.driver_id)||`Driver #${r.driver_id}`}),e.jsx("div",{className:"text-sm",style:{color:s.textLight},children:l("supSched.driver")})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl",style:{backgroundColor:s.background},children:[e.jsx(d.Manpower,{className:"w-5 h-5 flex-shrink-0 mt-1",style:{color:s.primary}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-semibold mb-1",style:{color:s.text},children:(o=r.assigned_manpower_ids)!=null&&o.length?l("supSched.manpower"):l("supSched.noTeamAssigned")}),(t=r.assigned_manpower_ids)!=null&&t.length?e.jsx("div",{className:"flex flex-wrap gap-2",children:r.assigned_manpower_ids.map(c=>e.jsx("span",{className:"px-2 py-1 rounded-lg text-sm border",style:{backgroundColor:s.cardBg,borderColor:s.border,color:s.text},children:X.get(c)||`#${c}`},c))}):e.jsx("div",{className:"text-sm",style:{color:s.textLight},children:l("supSched.manpower")})]})]})]})]}),e.jsxs("button",{onClick:()=>$e(r.id),className:"flex items-center gap-2 px-4 py-3 rounded-xl font-semibold transition-all duration-300 hover:scale-105 active:scale-95 group-hover:op-100 lg:opacity-70",style:{backgroundColor:s.errorLight,color:s.error},children:[e.jsx(d.Delete,{className:"w-4 h-4"}),e.jsx("span",{children:l("supSched.remove")})]})]})},r.id)})}):e.jsxs("div",{className:"text-center py-12 rounded-2xl",style:{backgroundColor:s.background},children:[e.jsx(d.Search,{className:"w-16 h-16 mx-auto mb-4",style:{color:s.textLighter}}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:s.textLight},children:l("supSched.empty.noMatchTitle")}),e.jsx("p",{style:{color:s.textLighter},children:l("supSched.empty.noMatchDesc")})]}):e.jsxs("div",{className:"text-center py-12 lg:py-16 rounded-2xl border-2 border-dashed",style:{backgroundColor:s.background,borderColor:s.border},children:[e.jsx(d.Calendar,{className:"w-16 h-16 mx-auto mb-4",style:{color:s.textLighter}}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:s.textLight},children:l("supSched.empty.noScheduledTitle")}),e.jsx("p",{className:"text-lg mb-6",style:{color:s.textLighter},children:l("supSched.empty.noScheduledDesc")}),e.jsxs(ge,{onClick:()=>{var r;return(r=document.getElementById("schedule-form"))==null?void 0:r.scrollIntoView({behavior:"smooth"})},size:"md",children:[e.jsx(d.Add,{className:"w-5 h-5"}),e.jsx("span",{children:l("supSched.empty.scheduleFirst")})]})]})})]})]})})}function ve(l){return/^\d{2}:\d{2}$/.test(l)?`${l}:00`:l}export{He as default};
