import{j as e}from"./index-BdDvBGrt.js";import{r as t}from"./react-BeLGUnOF.js";const S=[{id:"c1",name:"Chief A"},{id:"c2",name:"Chief B"},{id:"c3",name:"Chief C"}],q=()=>{const[r,m]=t.useState(""),[n,u]=t.useState(""),[o,h]=t.useState(""),[i,x]=t.useState(""),[a,g]=t.useState(null),[f,l]=t.useState(null),[d,b]=t.useState(!1),[p,j]=t.useState(null);async function C(s){if(s.preventDefault(),l(null),j(null),!r.trim()||!n.trim()||!o.trim()||!i.trim()){l("All fields except chief assignment are required.");return}const v=localStorage.getItem("token");if(!v){l("You must be logged in to create a zone.");return}const w=a&&/^\d+$/.test(a)?Number(a):null,k={zoneName:r,cell:n,village:o,description:i,assignedChief:w};try{b(!0);const y=await fetch("http://localhost:4000/api/zones",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify(k)}),c=await y.json();if(!y.ok)throw new Error((c==null?void 0:c.error)||"Failed to create zone");j("Zone created successfully."),m(""),u(""),h(""),x(""),g(null)}catch(N){l(N.message||"Failed to create zone")}finally{b(!1)}}return e.jsxs("div",{className:"p-6 max-w-3xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create a new one"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[f&&e.jsx("div",{className:"text-red-600",children:f}),p&&e.jsx("div",{className:"text-green-600",children:p}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zone Name"}),e.jsx("input",{value:r,onChange:s=>m(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cell"}),e.jsx("input",{value:n,onChange:s=>u(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Village"}),e.jsx("input",{value:o,onChange:s=>h(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location Description"}),e.jsx("textarea",{value:i,onChange:s=>x(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assign Chief (optional)"}),e.jsxs("select",{value:a??"",onChange:s=>g(s.target.value||null),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[e.jsx("option",{value:"",children:"-- None --"}),S.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:d,className:`px-4 py-2 text-white rounded-md ${d?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"}`,children:d?"Creatingâ€¦":"Create Zone"})})]})]})};export{q as default};
