import{j as e}from"./index-DZTFkylD.js";import{r,L as n}from"./react-CzDbI3ao.js";import{U as y,B as E,W as D,C as k,a as L,H as C,b as P}from"./ui-fx2JTPqr.js";const S="http://localhost:4000",z=()=>{var g;const[s,N]=r.useState(null),[f,o]=r.useState(!1),[d,c]=r.useState(null);function l(){const i=localStorage.getItem("token");i&&(o(!0),c(null),fetch(`${S}/api/chief/dashboard`,{headers:{Authorization:`Bearer ${i}`}}).then(async t=>{const a=await t.json();if(!t.ok)throw new Error((a==null?void 0:a.error)||"Failed to load");N(a)}).catch(t=>c((t==null?void 0:t.message)||"Failed to load")).finally(()=>o(!1)))}r.useEffect(()=>{l();function i(){l()}return window.addEventListener("payments-updated",i),()=>{window.removeEventListener("payments-updated",i)}},[]);const u=(s==null?void 0:s.chiefName)||"-",p=(s==null?void 0:s.zoneName)||((g=s==null?void 0:s.zones)!=null&&g.length?"Multiple Zones":"-"),m=(s==null?void 0:s.clientsTotal)||0,x=(s==null?void 0:s.amountTotal)||0,h=(s==null?void 0:s.amountPaid)||0,v=(s==null?void 0:s.amountRemaining)??Math.max(0,x-h),j=(s==null?void 0:s.clientsPaid)||0,b=(s==null?void 0:s.clientsRemaining)??Math.max(0,m-j),w=(s==null?void 0:s.todayPayments)||0;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[#1E1E1E]",children:"Chief of Zone Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Overview for chief and zone"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Chief"}),e.jsx("p",{className:"text-lg font-semibold text-[#1E1E1E]",children:u}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Zone"}),e.jsx("p",{className:"text-lg font-semibold text-[#1E1E1E]",children:p}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:l,className:"text-[#D97706] hover:text-[#B45309] underline text-sm transition-colors",children:"Refresh"})})]})]}),d&&e.jsx("div",{className:"text-red-600",children:d}),f?e.jsx("div",{children:"Loadingâ€¦"}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-amber-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Number of Clients"}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:m.toLocaleString()}),e.jsx("div",{className:"mt-2",children:e.jsx(n,{to:"/clients?scope=chief&filter=all",className:"text-[#D97706] hover:text-[#B45309] underline text-sm transition-colors",children:"View"})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-amber-50 text-[#D97706]",children:e.jsx(y,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-amber-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount To Be Paid"}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:x.toLocaleString()})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-amber-100 text-[#B45309]",children:e.jsx(E,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Amount Paid"}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:h.toLocaleString()}),e.jsx("div",{className:"mt-2",children:e.jsx(n,{to:"/clients?scope=chief&filter=paid",className:"text-[#15803D] hover:text-[#166534] underline text-sm transition-colors",children:"View"})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-green-50 text-[#15803D]",children:e.jsx(D,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Remaining Amount"}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:v.toLocaleString()})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-amber-50 text-[#D97706]",children:e.jsx(k,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clients Paid"}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:j.toLocaleString()}),e.jsx("div",{className:"mt-2",children:e.jsx(n,{to:"/clients?scope=chief&filter=paid",className:"text-[#15803D] hover:text-[#166534] underline text-sm transition-colors",children:"View"})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-green-50 text-[#15803D]",children:e.jsx(L,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-amber-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clients Remaining"}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:b.toLocaleString()}),e.jsx("div",{className:"mt-2",children:e.jsx(n,{to:"/clients?scope=chief&filter=remaining",className:"text-[#D97706] hover:text-[#B45309] underline text-sm transition-colors",children:"View"})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-amber-50 text-[#D97706]",children:e.jsx(C,{className:"h-8 w-8"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-6 border border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Payments"}),e.jsx("p",{className:"text-2xl font-bold text-[#1E1E1E] mt-2",children:w.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Payments received today"}),e.jsx("div",{className:"mt-2",children:e.jsx(n,{to:"/payments?scope=chief&filter=today",className:"text-[#15803D] hover:text-[#166534] underline text-sm transition-colors",children:"View"})})]}),e.jsx("div",{className:"shrink-0 p-2 rounded-lg bg-green-50 text-[#15803D]",children:e.jsx(P,{className:"h-8 w-8"})})]})})]})]})};export{z as default};
